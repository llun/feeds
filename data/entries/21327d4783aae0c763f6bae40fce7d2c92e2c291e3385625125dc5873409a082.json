{"title":"Ember.js","link":"https://www.llun.me/posts/dev/2015-01-01-Ember.js/","date":1420070400000,"content":"\n      \n        <p>This are all notes after one month using Ember.js</p>\n<p><em>tl;dr Download dev version, Look into RESTAdapter detail, Don't use native Promise, Follow getting started</em></p>\n<h3 id=\"downloads\">Downloads <a class=\"direct-link\" href=\"https://www.llun.me/posts/dev/2015-01-01-Ember.js/#downloads\">#</a></h3>\n<p>This is the first thing that waste my time, from <a href=\"http://emberjs.com/\">their home page</a> you will see big download starter kit in center of the page. If you're new and don't have old application before, <a href=\"https://github.com/emberjs/starter-kit/archive/v1.9.1.zip\" target=\"_blank\" rel=\"noopener\">click that button</a> is the great idea and don't waste the time confusing the <em>production</em> link under that button.</p>\n<p>The <a href=\"http://builds.emberjs.com/tags/v1.9.1/ember.prod.js\">production</a> in Ember.js means no <em>debug</em> messages and <em>testing</em>. I'm not sure what's the reason they split the version like this, maybe for security reason so when release application in production, no one won't see any weird messages and using ember.js tools looking into your production application but they should say something on the main page what's <em>production</em> means and not hiding in bottom of <a href=\"http://emberjs.com/guides/testing/integration/\">integration testing, please note section!</a></p>\n<p>For other people who working on existing app and just want to upgrade ember.js version, just download <a href=\"http://builds.emberjs.com/tags/v1.9.1/ember.js\">debug</a> version under that big starter kit button.</p>\n<p>Another thing that waste my time is finding ember-data.js file, if you need it for Ember.js model, just go to <a href=\"http://emberjs.com/builds/#/beta\">build page beta section</a> (which you won't find it on the main page and starter guide will just link to ember-data.js file directly) and scroll down to the bottom to download.</p>\n<h3 id=\"structure\">Structure <a class=\"direct-link\" href=\"https://www.llun.me/posts/dev/2015-01-01-Ember.js/#structure\">#</a></h3>\n<p>Everything start with application and route, this part you can see in <a href=\"https://github.com/emberjs/starter-kit/archive/v1.9.1.zip\" target=\"_blank\" rel=\"noopener\">starter kit</a>. The most simple app will look like this</p>\n<pre><code>App = Ember.Application.create()\nApp.Router.map(function() {\n})\nApp.IndexRoute = Ember.Route.extend({\n})\n</code></pre>\n<p><strong>Application</strong> is the main object that wrap around your whole app which equal to whole page that include this script. The first route that will automatically get call is <em>IndexRoute</em> and it will magically link to <em>IndexController</em> if you define it under the route.</p>\n<h4 id=\"route\">Route <a class=\"direct-link\" href=\"https://www.llun.me/posts/dev/2015-01-01-Ember.js/#route\">#</a></h4>\n<p>Route in Ember.js is for mapping url fragments (thing after # in url) to <em>Controller</em> and template. It's also providing additional information to the controller e.g. mode. The structure inside router is similar to Rails application. It has <em>resource</em> and <em>route</em> for telling which template should get render and which controller should get create to map data to the page.</p>\n<p>Here is a sample</p>\n<pre><code>App.Router.map(function() {\n\n\tthis.route('page1')\n\tthis.resource('model1', function() {\n\t\tthis.route('action1')\n\t})\n\n})\n</code></pre>\n<p>This router map will map to 4 templates and controllers</p>\n<ul>\n<li>index.hbs with IndexController and IndexRoute. This is automatically map.</li>\n<li><strong>this.route('page1')</strong> will map to page1.hbs with Page1Controller and Page1Route.</li>\n<li><strong>this.resource('model1')</strong> will map to <em>model1/index.hbs</em> with <em>Model1Controller/Model1IndexController</em> and <em>Model1Route/Model1IndexRoute</em></li>\n<li><strong>this.route('action1')</strong> will map to <em>model1/action1.hbs</em> with <em>Model1Controller/Model1Action1Controller</em> and <em>Model1Route/Model1Action1Route</em></li>\n</ul>\n<p>More detail see in <a href=\"http://emberjs.com/guides/routing/defining-your-routes/\">defining your routes</a>.</p>\n<h4 id=\"controller\">Controller <a class=\"direct-link\" href=\"https://www.llun.me/posts/dev/2015-01-01-Ember.js/#controller\">#</a></h4>\n<p>This is the most strange forward to understand in Ember.js. It doesn't have magic much (because most of it happen elsewhere and inject to controller). Ember.js controller is for providing information to template and do the work. It has three main things, <em>property</em>, <em>observer</em> and <em>actions</em>.</p>\n<ul>\n<li>\n<p><strong>property</strong> is the value that will get render in template. When this value change it will automatically re-render part of template with a new value. It can change from template when user changes the value in form too. Property can be a function which is called computed property. The function will accept two parameters, key and value and have to call <code>.property()</code> after it. <code>.property()</code> is similar to <code>.observes</code> is to tell property update the value when list of properties provide inside function has been changed.</p>\n<pre><code>App.IndexController = Ember.ObjectController.extend({\n\tproperty1: 10,\n\tproperty2: function(key, value) {\n\t\treturn value\n\t}.\tproperty(),\n\tproperty3: function(key, value) {\n\t}.property('property1','property2')\n})\n</code></pre>\n</li>\n<li>\n<p><strong>observer</strong> is special function that listen to the change and do something. In Ember.js controller, usually there's no function declare directly in controller. Anything declare here are just a property. So if you want to do something special to get a value, observer will do this job e.g. fetching model data or create model (which will return different object) and set the correct object to the property.</p>\n<pre><code>App.IndexController = Ember.ObjectController.extend({\n\tproperty1: null,\n\t_didSomethingChange: function() {\n\t\tvar self = this\n\t\tif (something) {\n\t\t\tthis.store.fetch('model_name', id).then(function(model) {\n\t\t\t\tself.set('property1', model.get('content')\n\t\t\t})\n\t\t} else {\n\t\t\tvar model = this.store.createRecord('model_name')\n\t\t\tself.set('property1', model)\n\t\t}\n\n\t}.observes('something')\n})\n</code></pre>\n</li>\n<li>\n<p><strong>actions</strong> is a map of functions that send from template or other controllers to do an action. The action can be submit form or getting a model.</p>\n<pre><code>App.IndexController = Ember.ObjectController.extend({\n\tactions: {\n\t\tsave: function() {\n\t\t\t// do something\n\t\t}\n\t}\n})\n</code></pre>\n</li>\n</ul>\n<h4 id=\"template\">Template <a class=\"direct-link\" href=\"https://www.llun.me/posts/dev/2015-01-01-Ember.js/#template\">#</a></h4>\n<p>Ember.js is using <a href=\"http://handlebarsjs.com/\">handlebars</a> which some special syntax e.g. ``. Template is declared in html file with special type <code>text/x-handlebars</code> and special attribute <code>data-template-name</code> to map between route and template e.g. if the route is <strong>index</strong>, template name will be <strong>index</strong> and if route is in sub resource <strong>model1</strong>, template name will be <strong>model1/route_name</strong>.</p>\n<p>Template detail can see in <a href=\"http://emberjs.com/guides/templates/the-application-template/\">template</a> section.</p>\n<h4 id=\"data-(or-models)\">Data (or Models) <a class=\"direct-link\" href=\"https://www.llun.me/posts/dev/2015-01-01-Ember.js/#data-(or-models)\">#</a></h4>\n<p>This is special part that doesn't include in main ember.js package. It needs to download separatly from <a href=\"http://emberjs.com/builds/#/beta\">beta page.</a></p>\n<p>When include ember-data in the app, it will provide store inside <em>Controller</em> and <em>Route</em>. To use it, start with create the model. Model in Ember.js is just a dump model. It's for declaring what is inside it. If it doesn't declare, when the data come in from the server, the property that doesn't declare cannot access it. To create the model just extends it like <em>Controller</em> and <em>Route</em></p>\n<pre><code>App.Model = DS.Model.extend({\n\tproperty1: DS.attr('string'),\n\tproperty2: DS.attr('date')\n})\n</code></pre>\n<p><strong>DS.attr</strong> accepts type of property, it can be <code>string</code>, <code>date</code>, <code>number</code> or <code>boolean</code>.</p>\n<p>Other than attribute, ember data is also defines the relationship between model. All relationships can see from <a href=\"http://emberjs.com/guides/models/defining-models/\">here</a> but one important thing is the <a href=\"http://emberjs.com/guides/models/the-rest-adapter/\">json format</a> that need to return from server (or custom adapter) or make it works with Ember data relationship.</p>\n<h3 id=\"testing\">Testing <a class=\"direct-link\" href=\"https://www.llun.me/posts/dev/2015-01-01-Ember.js/#testing\">#</a></h3>\n<p>Ember.js site has some testing <a href=\"http://emberjs.com/guides/testing/\">documentation here.</a> Testing framework uses inside Ember.js is QUnit. It also provides <a href=\"https://github.com/rwjblue/ember-qunit\" target=\"_blank\" rel=\"noopener\">helper</a> that help on unit test. Here are some notes when using ember-qunit</p>\n<ul>\n<li>\n<p>It doesn't have <code>beforeEach</code> and <code>afterEach</code> yet. In QUnit website it might shows that functions but when uses with ember-qunit, change the name to <code>setup</code> and <code>tearDown</code> or it won't get call.</p>\n</li>\n<li>\n<p>No <code>assert</code> in arguments. ember-qunit doesn't pass anything to the test functions, any assertion can call directly without <code>assert</code> prefix.</p>\n</li>\n<li>\n<p><strong>Don't use native Promise!</strong> This make me stuck for a few weeks. In Ember.js, it provides Ember.RSVP that has all the same functions as native Promise. When testing asynchronous code, put anything that use Promise inside <code>Ember.run</code> and it will run before assertion next to it.</p>\n<p>Sample</p>\n<pre><code>var controller = null\nmoduleFor('controller:index', 'Sample test', {\n\tsetup: function() {\n\t\tcontroller = this.subject()\n\t},\n\ttearDown: function() {\n\t}\n})\n\ntest('something', function() {\n\tEmber.run(function() {\n\t\tcontroller.send('action')\n\t})\n\n\tok(controller.propertyAffectedAction)\n})\n</code></pre>\n</li>\n</ul>\n<h3 id=\"other-notes\">Other notes <a class=\"direct-link\" href=\"https://www.llun.me/posts/dev/2015-01-01-Ember.js/#other-notes\">#</a></h3>\n<p>After one month I feel ok with Ember.js but I don't think I will suggest other to use it. It has to many magic that need a lot of documentation which some part need to jump around to understand it and many things need to use Ember specific tool to doing thing (Promise!)</p>\n<p>Maybe I need more time to understand before I will like it but currently I will use it only for work and everything else for other.</p>\n\n        <p>\n          <a href=\"mailto:comment@llun.me?subject=Common on post https://www.llun.me/posts/dev/2015-01-01-Ember.js/\">Send a comment</a>\n        </p>\n      \n    ","author":"","siteTitle":"@llun story","siteHash":"e492a4c5a091b6624e5872d8d003bc73eb1166cc8f88db58c44e1f8dfb9c7252","entryHash":"21327d4783aae0c763f6bae40fce7d2c92e2c291e3385625125dc5873409a082","category":"Me"}