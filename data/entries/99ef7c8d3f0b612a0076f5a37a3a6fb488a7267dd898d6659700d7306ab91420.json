{"title":"Chengyu Wordle Is Not a Love Story","link":"https://cheeaun.com/blog/2022/02/chengyu-wordle-is-not-a-love-story/","date":1644796800000,"content":"<p>From The New York Times article “<a href=\"https://www.nytimes.com/2022/01/03/technology/wordle-word-game-creator.html\">Wordle Is a Love Story</a>”, it began as a sweet love <a href=\"https://youtu.be/X_e2IEaR4aA?t=1019\">story</a> of <a href=\"https://en.wikipedia.org/wiki/Josh_Wardle\">Josh Wardle</a> building a game for his partner. It became super popular and now has <a href=\"https://en.wikipedia.org/wiki/Wordle\">its own Wikipedia page</a>.</p><figure><img src=\"/blog/images/screenshots/web/wordle-brag.jpg\" alt=\"Wordle brag on social media\" width=\"800\" height=\"600\" /></figure><p>I first saw it on my Twitter timeline when people keep posting their Wordle results. I was honestly annoyed because they were just bragging and the results didn’t really tell much. At that time, I didn’t play Wordle yet, so I pretty much ignored them. They kind of pollute the social media timelines, <em>but</em> at least they're <strong>better</strong> than ads. 🤷‍♂️</p><p>Due to peer pressure, I started playing it.</p><p>I also came across a few “forks” of Wordle:</p><ul>\n<li><a href=\"https://twitter.com/millerdl/status/1484286518005051394\">Primel, by David Lawrence</a> - guess a 5 digit prime number.</li>\n<li><a href=\"https://twitter.com/pveyes/status/1484454960586579968\">Katla, by Fatih Kalifa</a> - Wordle, in Indonesian language.</li>\n<li><a href=\"https://twitter.com/narze/status/1484596261277900810\">Thwordle, by Manassarn Manoonchai</a> - Wordle, in Thai language.</li>\n<li><a href=\"https://amanz.my/2022322924/\">Katapat, by Eugene Low</a> - Wordle, in Bahasa Malaysia.</li>\n</ul><p>I'm like, “Hey, that's pretty cool, but maybe I could try something else?”.</p><p>On 21 January 2022, I <a href=\"https://twitter.com/cheeaun/status/1484482726644183041\">tweeted</a>:</p><blockquote>\n<p>Wordle, but for Chinese idioms.</p>\n<p>#idea</p>\n</blockquote><p>This was timely, because Chinese New Year was coming up.</p><p>I looked up some data from a few Google searches and realised that this is kind of doable.</p><h2>Finding the dataset</h2><p>For Wordle, one of the rules of the game is that each guess must be a valid 5-letter word. So Wordle needs a <em>huge</em> list of valid 5-letter words in its database.</p><p>For Chinese idioms, I would need the same thing and I found a huge list of idioms from <a href=\"https://github.com/pwxcoo/chinese-xinhua\">pwxcoo/chinese-xinhua</a> repository. They are the Chinese Xinhua Dictionary Database (中华新华字典数据库) with a total of 31,648 idioms, where roughly 29,502 of them are 4-letter idioms.</p><p><strong>That’s a lot.</strong></p><p>I don’t think anyone will be able to remember that many idioms. I probably can filter out some common or well-known ones but I don’t really know how to do that.</p><p>A little googling lead me to another dataset from <a href=\"https://github.com/thunlp/THUOCL\">thunlp/THUOCL</a> repository. It’s <strong>THUOCL</strong> which stands for THU (<a href=\"https://www.tsinghua.edu.cn/\">Tsinghua University</a>) Open Chinese Lexicon (清华大学开放中文词库).</p><p>It has roughly 8000+ idioms and contains word frequency statistics DF value (Document Frequency).</p><p>To be honest, I don’t know exactly how the frequency statistics are done. This is really not my domain expertise so I think I’ll just use whatever dataset available and focus on the game coding side of things instead 😂.</p><h2>Building the game</h2><p>Generally speaking, the idea is <a href=\"https://twitter.com/JuanitoFatas/status/1484496229010599940\">not new</a>.</p><figure><img src=\"/blog/images/screenshots/web/pinyincaichengyu-com@2x.png\" alt=\"pinyincaichengyu.com, showing the “How to play” section\" width=\"375\" height=\"667\" /></figure><p>There’s already the very popular <a href=\"https://pinyincaichengyu.com/\">拼音猜成语</a> (Pīnyīn cāi chéngyǔ) made by <a href=\"https://limboy.me/\">Li Zhong</a>, which uses <a href=\"https://en.wikipedia.org/wiki/Pinyin\">pinyin</a> input to guess Chinese idioms. It’s using the same QWERTY keyboard as Wordle, but with <em>more</em> than five letter tiles. It validates the words individually, generally the pinyin spelling <em>per</em> Chinese character, so you can’t just randomly type invalid pinyin and throw in all the vowels 😂.</p><p>I had a different idea.</p><p>Instead of constructing the pinyin to form an idiom, I feel that it would be better if there’s more focus on the Chinese characters themselves instead of alphabets.</p><p>JinGen <a href=\"https://twitter.com/jg_lim/status/1484506430711697412\">joked</a> that the hypothetical keyboard would be massive 🤣:</p><figure><img src=\"/blog/images/screenshots/web/wordle-chinese-keyboard@2x.png\" alt=\"Wordle mock-up, with a massive Chinese keyboard\" width=\"1280\" height=\"666\" /></figure><p>Of course, Chinese keyboards don’t really look like that. On iOS, there are two kinds; <a href=\"https://chinese.yabla.com/type-chinese-characters.php?platform=ios\">pinyin keyboard and handwriting recognition</a>.</p><p>I don’t know, I find them too much work, just to play a game.</p><p>In Wordle, a player tap 5 keys to get a 5-letter word. For Chinese characters, a player need to tap quite a lot of keys just to form one character. For example, the word “pinyin” consists of 6 alphabetical letters to form 2 Chinese characters (拼音).</p><p>So I want one tap = one character. But JinGen’s mockup above is ridiculous.</p><p>I thought about this. 🤔</p><p>Instead of showing <em>all</em> characters like JinGen’s mockup, why not a subset of them? Maybe roughly 20 characters? (QWERTY keyboard has 26)</p><figure><img src=\"/blog/images/screenshots/software/ios-keyboard-suggestions@2x.png\" alt=\"iOS keyboard suggestions interface\" width=\"368\" height=\"332\" /></figure><p>Instead of the full keyboard, why not emulate the suggestions a.k.a. Predictive Text at the top of the keyboard?</p><p>So for every idiom, I could generate a list of 20 characters. It’ll be minimum 20 characters and they could form a minimum of 6 idioms, because there are 6 chances. And it’s not just minimum 6 possible idioms, it’s minimum 6 possible “high-frequency” idioms, which could later form a few more “low-frequency” idioms.</p><p>At this point, I have no idea if this would work at all.</p><p>I coded it anyway 🤷‍♂️.</p><p>The <a href=\"https://twitter.com/cheeaun/status/1484482726644183041\">first prototype</a> looks like this:</p><figure><img src=\"/blog/images/screenshots/web/chengyu-wordle-first-prototype@2x.jpg\" alt=\"Chengyu Wordle first prototype\" width=\"320\" height=\"568\" /></figure><p>Not bad.</p><p>I use the <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/ruby\">HTML <code>ruby</code> annotation element</a> to display the pinyin above the Chinese characters. The specifications may have changed slightly but <a href=\"https://chenhuijing.com/blog/html-ruby/\">Hui Jing has explained them in depth</a>.</p><p>Later on, I <a href=\"https://twitter.com/cheeaun/status/1484717109100032005\">found</a> that I’m not the first person who came up with this idea. There’s another <a href=\"http://www.ddooo.com/softdown/44315.htm\">Android-based game</a> that shows a list of characters as the keyboard:</p><figure><img src=\"/blog/images/screenshots/software/fengkuang-cai-chengyu-anzhuo-ban-crazy-guess-idioms-android.jpg\" alt=\"[疯狂猜成语安卓版 (Fēngkuáng cāi chéngyǔ ānzhuō bǎn)](http://www.ddooo.com/softdown/44315.htm)\" width=\"320\" height=\"421\" /></figure><p>It has 24 keys and even has an image illustration as hints 🤯.</p><p>That’s quite impressive if the game really has illustrations for <em>every</em> idiom. I mean, imagine hiring an artist drawing hints for all thousands of idioms 🤯.</p><p>Anyway, I wasn’t deterred from this and decided to keep going with my implementation.</p><h2>Adapting to the viewports</h2><p>Wordle is actually responsive for different viewport dimensions.</p><figure><img src=\"/blog/images/screenshots/web/responsive-wordle@2x.png\" alt=\"Responsive Wordle, in 3 viewport sizes\" width=\"1000\" height=\"625\" /></figure><ul>\n<li>The letter tiles will shrink in smaller viewports.</li>\n<li>The letter tiles will grow in larger viewports, but there’s a maximum width and height, so that the letters won’t be too big.</li>\n<li>The keyboard will <em>not</em> shrink in smaller viewports because it’s where people type. No one likes small keypads.</li>\n<li>The keyboard will grow in larger viewports but there’s a maximum width and height too.</li>\n<li>In larger viewports, the keyboard will always stick to the bottom and there’ll be blank spaces <em>around</em> the letters board.</li>\n</ul><p>Wordle uses a combination of CSS Flexbox and JavaScript code for this magic.</p><p>I manage to <a href=\"https://twitter.com/cheeaun/status/1484869992483295232\">re-implement</a> this, with pure CSS.</p><figure></figure><p>Few tricks were used such as the <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/aspect-ratio\"><code>aspect-ratio</code> CSS property</a> combined with <code>max-height</code> on the tile rows.</p><figure><img src=\"/blog/images/screenshots/web/responsive-chengyu-wordle@2x.png\" alt=\"Responsive Chengyu Wordle, in 5 viewport sizes\" width=\"1500\" height=\"794\" /></figure><p>Unlike Wordle, the keyboard doesn’t need to be exactly 3 rows or match how a software keyboard looks like on mobile operating systems. In even smaller viewports, with smaller heights, the keyboard becomes a one-liner and horizontally scrollable!</p><p>Crazily enough, it even <a href=\"https://twitter.com/llun/status/1489498893452668935\">works on</a> <a href=\"https://www.llun.me/posts/dev/2022-02-05-apple-watch-browser/\">Apple Watch</a>! 🤯</p><figure><img src=\"/blog/images/photos/objects/chengyu-wordle-browser-apple-watch.jpg\" alt=\"Chengyu Wordle inside a browser on Apple Watch\" width=\"480\" height=\"640\" /></figure><h2>Keyboard shortcuts</h2><p>Despite showing a software keyboard, Wordle also works with the hardware keyboard, which is usually meant for desktop players.</p><p>I think there are some Chinese (hardware) keyboards out there but I’ve never used them. I always use my Macbook’s QWERTY keyboard.</p><p>I <a href=\"https://twitter.com/cheeaun/status/1485254481348816897\">added</a> some basic keyboard shortcuts.</p><figure></figure><p>Pressing a letter will match the first letter of the pinyin. For example, pressing ‘Q’ will choose ‘qián’.</p><p>If the letter has many matches, pressing right or left arrow will cycle through them. For example, for ‘J’, the arrow keys will cycle through ‘jiàn’ ‘jìn’ and ‘jīng’.</p><p>Pretty neat.</p><h2>Beta testing</h2><p>Since I have no idea if this would work at all, I <a href=\"https://twitter.com/cheeaun/status/1485981757644353539\">asked around</a> for people to help beta test the game.</p><p>Surprisingly feedback has been quite interesting. Somehow the game becomes either <em>too easy</em> or <em>too difficult</em> for the players. There’s hardly a middle ground here 😅. So it’s either the players knows a large vocabulary of idioms or just one or two of them 😂.</p><p>Along the testing period, there were some <em>small</em> issues.</p><h2>Pinyin</h2><p>Pinyin for some characters were wrong. My initial attempt was quite hacky, so I solved it by using the whole <a href=\"https://github.com/hotoo/pinyin\"><code>pinyin</code></a> library, currently maintained by <a href=\"https://github.com/hotoo\">hotoo (闲耘™)</a>.</p><p>I was honestly surprised that pinyin mapping doesn’t work one-to-one, but one-to-many. 🤔</p><figure><img src=\"/blog/images/screenshots/web/pinyin-mapping@2x.png\" alt=\"Pinyin mapping, from individual pinyin characters to many Chinese characters\" width=\"603\" height=\"287\" /></figure><p>However, more than a week later, someone reported a bug to me:</p><figure><img src=\"/blog/images/screenshots/software/player-feedback-twitter-dm-wrong-pin-yin-mou-liao@2x.png\" alt=\"Player feedback on Twitter Direct Message about a wrong pinyin. The message includes a screenshot and a message “hi this word should be read as ‘mou’ not ‘liao’”\" width=\"562\" height=\"618\" /></figure><p>I was quite surprised to see this and turns out, this is <strong>heteronym</strong>.</p><p>Some Chinese characters are spelled and written the same way, but pronounced differently based on certain context.</p><figure><img src=\"/blog/images/screenshots/web/zdic-pinyin-mou-miu-miao-mu-liao@2x.png\" alt=\"ZDIC web site showing the multiple pinyin for 缪\" width=\"617\" height=\"273\" /></figure><p>I looked again at the <a href=\"https://github.com/hotoo/pinyin\">documentation for <code>pinyin</code> package</a> and realised that it serves a different dictionary for the web version compared to its Node version. The web version is <em>simpler</em> and smaller in file size. The author encourages that this pinyin conversion should be done in the back-end instead of front-end 🤔.</p><p>Hmm, for this game, I don’t plan to do this on the server-side though.</p><p>So I tried a few ways to somehow <em>force</em> the library to use the Node version but to no avail. I ended up using a different library called <a href=\"https://github.com/zh-lx/pinyin-pro\"><code>pinyin-pro</code></a>, currently maintained by <a href=\"https://zlxiang.com/\">Zhou Li Xiang</a>. It seems to have the whole dictionary and able to handle heteronyms too!</p><p>After some testing and <a href=\"https://github.com/zh-lx/pinyin-pro/issues/43\">a bug fix</a>, I manage to implement a pretty good implementation of a multiple-pinyin interface.</p><p>The pinyin shown on the keyboard will be based on the whole idiom context instead of per-character.</p><p>Technically, <code>pinyin('缪')</code> returns <code>mù</code> (from <code>pinyin-pro</code> library) or <code>liáo</code> (from the previous <code>pinyin</code> library). But <code>pinyin('未雨绸缪')</code> <em>should</em> correctly return <code>wèi yǔ chóu móu</code> (notice that it’s <code>móu</code> now). So the pinyin on the keyboard should show <code>móu</code>.</p><figure><img src=\"/blog/images/screenshots/web/chengyu-wordle-keys-luo-mou-ping@2x.png\" alt=\"Chengyu Wordle showing keys “罗” (luó), “缪” (móu) and “平” (píng)\" width=\"168\" height=\"68\" /></figure><p>But for some games, it’s possible that one character exhibits different pronunciations for different idioms. An example would be the character ‘<strong>恶</strong>‘ in the idioms 恶性循环 (<strong>è</strong> xìng xún huán) and 痛深恶绝 (tòng shēn <strong>wù</strong> jué). In this special case, the keyboard will show <em>both</em> pinyins.</p><figure><img src=\"/blog/images/screenshots/web/chengyu-wordle-keys-dao-e-wu-gui@2x.png\" alt=\"Chengyu Wordle showing keys “蹈” (dǎo), “恶” (è or wù) and “规” (guī)\" width=\"186\" height=\"104\" /></figure><p>Then what happens to the pinyin on the game tiles? Well, they’ll dynamically change based on the whole constructed idiom as-you-type! 🤯</p><figure></figure><h2>Idiom definitions</h2><p>I added an extra link that points to the definition or explanation of the hidden idiom. They will be shown in the results dialog when a player won or lost the game.</p><p>The first candidate was <a href=\"https://cc-cedict.org/editor/editor.php?handler=Main\">CC-CEDICT</a>. It’s <a href=\"https://cc-cedict.org/wiki/\">a project</a> to create an online, downloadable public-domain Chinese-English dictionary.</p><figure><a href=\"https://cc-cedict.org/editor/editor.php?handler=QueryDictionary&amp;querydictionary_search=%E5%9D%9A%E5%AE%9A%E4%B8%8D%E7%A7%BB\"><img src=\"/blog/images/screenshots/web/idiom-definition-cc-cedict@2x.png\" alt=\"Idiom definition on CC-CEDICT\" width=\"662\" height=\"571\" /></a></figure><p>Unfortunately, it doesn’t seem to have <em>all</em> the idiom entries, and mostly return not-found results 😢.</p><p>Then, one of the testers found <a href=\"https://hanyu.baidu.com/\">Baidu Hanyu (百度汉语)</a>.</p><figure><a href=\"https://hanyu.baidu.com/s?wd=%E5%9D%9A%E5%AE%9A%E4%B8%8D%E7%A7%BB\"><img src=\"/blog/images/screenshots/web/idiom-definition-baidu-hanyu@2x.png\" alt=\"Idiom definition on Baidu Hanyu\" width=\"794\" height=\"404\" /></a></figure><p>Seems better, but some idiom entries were missing too 😅.</p><p>Then, I found <a href=\"https://www.zdic.net/\">ZDIC</a> from <a href=\"https://twitter.com/_limboy/status/1487769444541931521\">Li Zhong’s tweet</a>, as he’s also adding idiom definitions on <a href=\"https://pinyincaichengyu.com/\">pinyincaichengyu.com</a>.</p><figure><a href=\"https://www.zdic.net/hans/%E5%9D%9A%E5%AE%9A%E4%B8%8D%E7%A7%BB\"><img src=\"/blog/images/screenshots/web/idiom-definition-zdic@2x.png\" alt=\"Idiom definition on ZDIC\" width=\"671\" height=\"539\" /></a></figure><p>In the end, I use both Baidu and ZDIC links for the sake of completeness.</p><p>I’ve even included the definitions into the game itself.</p><figure><img src=\"/blog/images/screenshots/web/chengyu-wordle-won-jian-ding-bu-yi-idiom-definition@2x.png\" alt=\"Chengyu Wordle’s dialog showing the player has won with inline idiom definition\" width=\"315\" height=\"268\" /></figure><h2>Chinese font</h2><p>During the beta test period, the game uses the <a href=\"https://fonts.google.com/specimen/Ma+Shan+Zheng\">Ma Shan Zheng font</a> from Google Fonts. It looks pretty nice.</p><p>One of the testers found a bug:</p><figure><img src=\"/blog/images/screenshots/web/ma-shan-zheng-font-bug@2x.png\" alt=\"Ma Shan Zheng font bug, incorrectly rendering a Chinese character\" width=\"581\" height=\"406\" /></figure><p>The character “丼” is rendered as “弗”?!?</p><p>This is <em>really</em> weird. It’s probably due to the font not supporting all glyphs, so I researched a little and found that it’s <em>really</em> difficult to find a good custom (and free) Chinese font. Even when I found one, the web font file sizes are seriously <strong>huge</strong>! 😅</p><p>There are some very detailed articles on this:</p><ul>\n<li><a href=\"http://kendraschaefer.com/2012/06/chinese-standard-web-fonts-the-ultimate-guide-to-css-font-family-declarations-for-web-design-in-simplified-chinese/\">Chinese Standard Web Fonts: A Guide to CSS Font Family Declarations for Web Design in Simplified Chinese</a></li>\n<li><a href=\"https://webdesign.tutsplus.com/articles/the-complete-beginners-guide-to-chinese-fonts--cms-23444\">The Complete Beginner’s Guide to Chinese Fonts</a></li>\n<li><a href=\"https://minitheory.com/2015/04/06/5-high-quality-chinese-webfont-services-for-your-next-chinese-web-project/\">5 High Quality Chinese Webfont services for your next Chinese web project</a></li>\n</ul><p>As a quick fix, I removed the font. Will probably revisit this later.</p><h2>Start date for daily idioms</h2><p>On the original Wordle, a new word is available every day. It’s not timezone-specific and actually relies on the user’s device timezone (local timezone).</p><p>This is an interesting thought. Timezone specificity is not important here for this game, unlike an app or a web product. All players can start playing the next new word around the clock instead of everyone around the globe waiting for that specific hour in the day, which could be 4AM or something. It might seem “unfair” for some players that some could play a new word <em>earlier</em> than players in the other timezone, but it doesn’t really matter as long as players only post the results without spoilers. For the more technical folks, they could actually skip to next day or any days by changing their operating system’s clock 😆.</p><p>From the implementation side, it could be a list of words and every word is assigned to specific dates. The question is how are they assigned? Off the top of my head, I think that the first day of the year could be the first word, 2nd day is the 2nd word and so on, but that means it’s limited to 365 words (year 2022)? Should it overflow to next year, so 1st January 2023 will serve the 366th word?</p><p>During the time when I build Chengyu Wordle, it’s already a few days after 1st January 2022, so setting the first idiom to day 1 would mean no one will be able to play it 😅.</p><p>My curiosity lead to digging in the code in Wordle.</p><figure><img src=\"/blog/images/screenshots/web/wordle-source-code-hardcoded-start-date-game-index-calculation@2x.png\" alt=\"Wordle‘s JavaScript source code, showing a hard-coded start date and the game index calculation\" width=\"571\" height=\"209\" /></figure><p>Aha! The variable <code>Ha</code> is a hard-coded start date! It’s <strong>19 June 2021</strong>! (Months are zero-indexed in JavaScript)</p><pre><code>function Na(e, a) {\n  var s = new Date(e)\n    , t = newDate(a).setHours(0, 0, 0, 0) - s.setHours(0, 0, 0, 0);\n  return Math.round(t / 864e5)\n}\n</code></pre><p>There’s another function <code>Na</code> that accepts two date values, which are supposedly the start date and today’s date, and returns the index. So if today’s date is 19 June 2021, it returns 0 (first word). 20 June 2021 returns 1 (second word) and so on.</p><pre><code>function Da(e) {\n  var a, s = Ga(e);\n  return a = s % La.length,\n  La[a]\n}\n</code></pre><p>The next function <code>Da</code> is a surprising find for me. It will cycle back to 0 once the index reaches the last word of the list. For example, if the game has a list of 100 words, what happens on the 101st day? Well, this logic will serve back the first word!</p><p>I think this is a pretty neat solution. It solves the problem of what if you’ve missed the last few days of words and thought that you can’t play them anymore. Once the list of words is exhausted, you’ll go back to the beginning of the list again ♻️.</p><p>For Chengyu Wordle, it started <em>without</em> this daily game feature. To compensate, I added a button that allows players to play a random idiom. Few days after testing, I added this daily game feature and set day 1 to <strong>27 January 2022</strong>.</p><p>Mathematically speaking, with 8000+ idioms in Chengyu Wordle, if a player plays one idiom per day, it’ll <strong>take more than 21 years to finish all the idioms</strong>. 🤯</p><h2>Evaluation rules</h2><p>Guessing words on Wordle will show the letters in coloured tiles.</p><ul>\n<li>Green = The letter is in the word and in the correct spot.</li>\n<li>Yellow = The letter is in the word but in the wrong spot.</li>\n<li>Gray = The letter is not in the word in any spot.</li>\n</ul><p>They might look simple at first, but oh boy, almost <a href=\"https://news.ycombinator.com/item?id=30174386\">everyone</a> <a href=\"https://news.ycombinator.com/item?id=30233600\">fell</a> <a href=\"https://news.ycombinator.com/item?id=30086083\">into</a> <a href=\"https://news.ycombinator.com/item?id=29947881\">this</a> <a href=\"https://news.ycombinator.com/item?id=30103848\">trap</a>.</p><p>It’s explained in this page written by Alex Selby: <a href=\"http://sonorouschocolate.com/notes/index.php?title=The_best_strategies_for_Wordle\">The best strategies for Wordle</a>:</p><blockquote>\n<p>I <em>think</em> the colour scoring rules work like this, but would be happy to be corrected.</p>\n<p>Let's refer to your guess as <em>testword</em>, and the secret word as <em>hiddenword</em>. Then I believe the scoring rules are these:</p>\n<ul>\n<li>First determine all greens, and cross out these letters in <em>testword</em> and <em>hiddenword</em>.</li>\n<li>Then from left to right in <em>testword</em> see which letters correspond to a letter in <em>hiddenword</em>. If you find one, then it's a yellow, but you need to cross it off in <em>hiddenword</em>.</li>\n<li>Remaining positions are scored as black.</li>\n</ul>\n<p>The second point means that you can't reuse letters in <em>hiddenword</em>, so for example the total number of green 'T's and yellow 'T's in <em>testword</em> can't exceed the number of 'T's in <em>hiddenword</em>.</p>\n<p>So if <em>hiddenword</em> is <strong>HOTEL</strong> then the <em>testword</em> <strong>SILLY</strong> would score <strong>BBYBB</strong>: the second 'L' does not score because only one 'L' can, and the earlier one takes precendence.</p>\n<p>But if <em>hiddenword</em> were <strong>DAILY</strong> then the same <em>testword</em> <strong>SILLY</strong> would score <strong>BYBGG</strong>. This time it's the first 'L' that doesn't score, because even though it is earlier than the 'L' in fourth position, greens take priority over yellows.</p>\n</blockquote><p><strong>The trap lies in repeated letters in a word.</strong></p><p>Instead of just a single loop to mark which letter is green or yellow, the logic needs to keep track of repeated letters, loop through again and either mark some letters yellow or not.</p><p>Initially my code handled the above cases and I was quite proud. Until someone reported another bug:</p><figure><img src=\"/blog/images/screenshots/web/chengyu-wordle-chu-chu-bug@2x.jpg\" alt=\"Chengyu Wordle bug, showing only one character in yellow tile, instead of two\" width=\"299\" height=\"325\" /></figure><p>On the second row, both of the character “楚” (chǔ) should be in yellow because the hidden idiom is 清清楚楚 (qīng qīng chǔ chǔ)!</p><p>I was quite dumbfounded, got fed up and <a href=\"https://twitter.com/cheeaun/status/1490329731958734848\">started writing tests</a>.</p><figure><img src=\"/blog/images/screenshots/software/chengyu-wordle-tests-idiom-states@2x.png\" alt=\"Chengyu Wordle tests, in JavaScript, for idiom states; testing every possible cases for highlighting the green, yellow and gray tiles\" width=\"613\" height=\"426\" /></figure><p>My logic fails when there are repeated letters in <strong>both</strong> the <em>testword</em> and <em>hiddenword</em>. And now with this tests, this will finally be fixed once and for all!</p><h2>Finishing touches</h2><figure><img src=\"/blog/images/artwork/web/chengyu-wordle-banner@2x.jpg\" alt=\"Chengyu Wordle banner, for the social media previews\" width=\"600\" height=\"314\" /></figure><p>It’s almost done, and I added a little sprinkle of finishing touches to the game:</p><ul>\n<li><strong><a href=\"https://adactio.com/journal/9881\">Metacrap</a></strong>: All the titles, descriptions, icons and social media preview images.</li>\n<li><strong>Idiom IDs</strong>: Besides allowing players to play a random idiom, each idiom is also assigned its own unique ID that’s shareable. So if someone shares the results, a link below the results will include the ID that goes to this exact idiom instead of the idiom of the day.</li>\n<li><strong>Hints</strong>: I added a “I’m stuck” button at the bottom of the keyboard, after seeing some folks struggled hard at the game. Every time it’s tapped, it’ll show a different hint. Technically, the hints should be good enough to be unstuck. 😉</li>\n<li><strong>Hard mode</strong>: While some players are having a hard time playing the game, some actually think that it’s <em>too easy</em>. So, I introduced “<a href=\"https://twitter.com/cheeaun/status/1491353605747908611\">Hard mode</a>”, which works a bit differently than Wordle’s. In Wordle’s “Hard mode”, any revealed hints must be used in subsequent guesses. In Chengyu Wordle, the number of keys increase from minimum 20 to 40, thus increasing the number of possible idiom guesses in a game.</li>\n<li><strong>Localisation</strong>: The game is available in both English and Simplified Chinese. The strings for Simplified Chinese were hastily translated via Google Translate, so help is pretty much needed. 🙏</li>\n<li><strong>Old browsers support</strong>: I use <a href=\"https://vitejs.dev/\">Vite</a> to bundle the code and needed to use <a href=\"https://github.com/vitejs/vite/tree/main/packages/plugin-legacy\">@vitejs/plugin-legacy</a> to create production builds for legacy browsers. For some reason, there are <strong>a lot</strong> of folks using <em>really</em> old Android phones with old browsers, as the errors are tracked via <a href=\"https://www.bugsnag.com/\">Bugsnag</a>.</li>\n<li><strong>Analytics</strong>: I took this chance to try a few privacy-friendly analytics like <a href=\"https://panelbear.com/\">Panelbear</a>, <a href=\"https://pirsch.io/\">Pirsch</a> and <a href=\"https://plausible.io/\">Plausible</a>. In the end, I end up using Plausible for its better user interface and features.</li>\n</ul><h2>The launch</h2><figure><img src=\"/blog/images/figures/interface/chengyu-wordle-iphone-screenshot.jpg\" alt=\"Chengyu Wordle on iPhone screenshot\" width=\"1024\" height=\"843\" /></figure><p>I officially launched <a href=\"https://cheeaun.github.io/chengyu-wordle/\">Chengyu Wordle</a> on <a href=\"https://twitter.com/cheeaun/status/1486655277516480527\">27 January 2022</a>, just one week after my <a href=\"https://twitter.com/cheeaun/status/1484482726644183041\">first tweet</a> and 4 days before Chinese New Year! 🚀</p><p>It’s <a href=\"https://github.com/cheeaun/chengyu-wordle\">open-sourced on GitHub</a>, with complete documentation on the dataset, technical setup and localisation files.</p><p>I’ve also made sure to attribute to other similar attempts by other talented folks!</p><ul>\n<li><a href=\"https://bryony.dev/chengyu/chengyu.html\">猜成语 (Cāi chéngyǔ)</a> by <a href=\"https://twitter.com/nurupo_dev\">@nurupo_dev</a></li>\n<li><a href=\"https://allanchain.github.io/chinese-wordle/\">拼成语 | Chinese Wordle</a> by <a href=\"https://allanchain.github.io/blog/\">Allan Chain</a></li>\n<li><a href=\"https://pinyincaichengyu.com/\">拼音猜成语 (Pīnyīn cāi chéngyǔ)</a> by <a href=\"https://limboy.me/\">Li Zhong</a></li>\n<li><a href=\"https://handle.antfu.me/\">汉兜 (Hàn dōu)</a> by <a href=\"https://twitter.com/antfu7\">Anthony</a> &amp; <a href=\"https://twitter.com/iiiiiiines_____\">Inès</a> (Another popular one!)</li>\n<li><a href=\"https://t.me/unofficial_wordle_bot\">Telegram @unofficial_wordle_bot</a> by <a href=\"https://www.facebook.com/iamohcy\">Oh Chin Yang</a></li>\n</ul><p>Few days later, I <a href=\"https://twitter.com/cheeaun/status/1487275289516265475\">made a pull request</a> for Chengyu Wordle to be added to <a href=\"https://rwmpelstilzchen.gitlab.io/wordles/\"><strong>Wordles of the World</strong></a>, the most comprehensive list of Wordle-like games and resources online.</p><p>Later on, I added <a href=\"https://twitter.com/cheeaun/status/1487766797994455044\">dark mode</a> and made this pretty cool 3D-looking mock with <a href=\"https://morflax.com/things\">Morflax Things</a>.</p><figure><img src=\"/blog/images/figures/interface/chengyu-wordle-light-dark-mode-iphones-mock.jpg\" alt=\"Chengyu Wordle in light and dark mode on two iPhones mock-up\" width=\"1007\" height=\"830\" /></figure><p>Chengyu Wordle got a quite few media coverage too! Some are <em>very</em> small mentions while some are quite prominent 😎.</p><ul>\n<li>30 Jan 2022: <a href=\"https://blog.user.today/wordle-games-gallery/\">6種英文和中文的 Wordle 猜字遊戲 打發時間真好用</a></li>\n<li>30 Jan 2022: <strong>Sixth Tone</strong> - <a href=\"https://www.sixthtone.com/news/1009586/wordle-like-games-slowly-gain-traction-on-chinese-social-media-\">Wordle-Like Games Slowly Gain Traction on Chinese Social Media</a></li>\n<li>2 Feb 2022: <strong>Kotaku</strong> - <a href=\"https://kotaku.com/games-like-wordle-subwaydle-nyct-mta-best-routes-1848461481\">A Sensational Wordle Clone Without Any Actual Words</a></li>\n<li>4 Feb 2022: <strong>8world Entertainment Lifestyle</strong> - <a href=\"https://entlife.8world.com/life/nerdle-nerdle-is-a-new-maths-based-wordle-clone-1718676\">全世界都在Wordle！快试试数字版Nerdle</a></li>\n<li>4 Feb 2022: <strong>Mothership</strong> - <a href=\"https://mothership.sg/2022/02/pm-lee-says-wordle-a-fun-way-to-keep-the-mind-engaged-recommends-chinese-malay-versions/\">PM Lee says Wordle a fun way to keep the mind engaged, recommends Chinese &amp; Malay versions</a></li>\n<li>6 Feb 2022: <strong>新加坡眼</strong> <a href=\"https://www.yan.sg/lixinglongzholi/\">这款小游戏风靡全球，让李显龙总理都“玩上瘾了”</a></li>\n<li>10 Feb 2022: <strong>AsiaOne</strong> - <a href=\"https://www.asiaone.com/lifestyle/want-more-wordle-here-are-13-spin-offs-try-including-singlish-version\">Want more Wordle? Here are 13 spin-offs to try, including a Singlish version</a></li>\n<li>11 Feb 2022: <strong>红蚂蚁</strong> <a href=\"https://www.redants.sg/good-reads/story20220211-5941\">连总理都推荐的爆红猜字游戏Wordle　为何在全球疯狂吸粉？</a></li>\n</ul><p>Honestly I haven't felt so excited in a long while!</p><p>The <strong>craziest ever mention</strong> has got to be <a href=\"https://www.facebook.com/leehsienloong/posts/484183366401131\">this</a>:</p><figure><a href=\"https://www.facebook.com/leehsienloong/posts/484183366401131\"><img src=\"/blog/images/screenshots/web/facebook-post-lee-hsien-loong-chengyu-wordle@2x.png\" alt=\"Facebook post by Lee Hsien Loong, with the content “Many Singaporeans have joined in the fun of playing Wordle - an online word puzzle game, where the goal is to guess a five-letter word within six tries. This game has become such a viral sensation that it was recently purchased by The New York Times. I’ve even noticed some ministries and agencies using the green, yellow and grey squares to liven up government messaging! I was pleasantly surprised to find out that there are Chinese and Malay versions of the game. Give it a go – a simple but fun way to keep the mind engaged. Original https://www.powerlanguage.co.uk/wordle/ Chinese: https://cheeaun.github.io/chengyu-wordle/ Malay: https://www.projecteugene.com/katapat.html – LHL”\" width=\"538\" height=\"755\" loading=\"lazy\" /></a></figure><p>On 3 February 2022, The Prime Minister of Singapore, <a href=\"https://en.wikipedia.org/wiki/Lee_Hsien_Loong\">Lee Hsien Loong</a>, <a href=\"https://www.facebook.com/leehsienloong/posts/484183366401131\">made a post on Facebook</a>, talked about how Singaporeans have joined in the fun of playing Wordle, linked to <a href=\"https://www.bbc.com/news/business-60208463\">BBC’s article</a>, and mentioned the original Wordle, the Chinese version (mine) and the <a href=\"https://www.projecteugene.com/katapat.html\">Malay</a> version! 🤯🤯🤯</p><p>When this happened, I was just finishing up my dinner and got quite a bunch of notifications from friends tagging me and congratulating me 😅.</p><p>Traffic shot up, from 7,000 visitors to 15,000 on the day itself and grew to 25,000 on the next day! 📈</p><figure><img src=\"/blog/images/screenshots/web/visitors-chart-shot-up-3-feb-2022-lee-hsien-loong-mention-facebook-plausible@2x.png\" alt=\"Visitors chart shot up on 3 February 2022 when Lee Hsien Loong mention the game on Facebook. Chart is from Plausible.\" width=\"1010\" height=\"464\" /></figure><h2>Learnings</h2><figure><a href=\"https://twitter.com/cheeaun/status/1491749802023202816\"><img src=\"/blog/images/figures/interface/wordle-tiles-3d@2x.png\" alt=\"Wordle tiles in 3D\" width=\"512\" height=\"288\" loading=\"lazy\" /></a></figure><p>I have a lot of fun building this game.</p><p>From trying to reverse engineer the mechanics of Wordle, to listening to how <a href=\"https://youtu.be/X_e2IEaR4aA?t=1019\">Josh Wardle made a prototype</a> back in 2013. Instead of rebuilding the exact same clone, somehow I tried to build a different variant of it, with its own set of challenges that I didn’t know much about. I spent a lot of time polishing every single detail while trying to preserve the whole unobtrusive nature of Wordle. Perhaps similar to the original author, I did not expect this to become huge at all, though mine is still smaller scale compared to the original Wordle.</p><p>By building a variant of Wordle, I felt like I’m part of <a href=\"https://rwmpelstilzchen.gitlab.io/wordles/\">a whole family of developers</a> who have done the same thing and experienced the same thing as I do. The author of <a href=\"https://www.subwaydle.com/\">Subwaydle</a> <a href=\"https://kotaku.com/games-like-wordle-subwaydle-nyct-mta-best-routes-1848461481\">mentioned</a> that he came across Chengyu Wordle and <a href=\"https://nerdlegame.com/\">Nerdle</a> which made him wanting to make his own.</p><p>I see a lot of people posting their Chengyu Wordle results on Twitter and Facebook, <em>together</em> with their Wordle results. On Facebook, I saw a woman <a href=\"https://www.facebook.com/TCKoays/posts/1185534145184481\">posting</a> about playing Chengyu Wordle and it took her 3 kids on dictionaries, 4 clues, 45 minutes and a translation to traditional Chinese to solve their first play. Even a teacher <a href=\"https://www.linkedin.com/feed/update/urn:li:activity:6893768924618473472?commentUrn=urn%3Ali%3Acomment%3A%28activity%3A6893768924618473472%2C6896231288982917120%29\">replied</a> to me that the game is very popular among teachers, very well received and shared among their Facebook groups.</p><p>This is not the first time I create a web game. Chengyu Wordle is the third one after my first web game, <a href=\"https://github.com/cheeaun/pentagoo\">Pentagoo</a> and second game, <a href=\"https://github.com/cheeaun/bubble-wrap\">Bubble Wrap</a>. Both didn’t get popular but were very fun to build too. They gave me some good foundation on how to build games, though the funny thing is I’m actually not very good in playing them. 🤣</p><p>Yeah, I built Chengyu Wordle, but I can’t play it because I can't actually read or write Chinese 😅. I can speak Mandarin though, and the pinyin was actually to help <em>me</em>, which in turn help others too. 🤷‍♂️</p><p>But heck, who cares, building a game is fun!</p><p>All of this happens within just <strong>two weeks</strong>.</p><p>Wow, what a ride.</p>","author":"Lim Chee Aun","siteTitle":"cheeaunblog","siteHash":"15c7c44e2960b5b47196ecb9d24e84a8cf386d0c7c30998ce31cc3eee11d971a","entryHash":"99ef7c8d3f0b612a0076f5a37a3a6fb488a7267dd898d6659700d7306ab91420","category":"Category2"}