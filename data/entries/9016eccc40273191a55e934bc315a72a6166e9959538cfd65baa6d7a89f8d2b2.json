{"title":"OpenTelemetry for NextJS and Google Cloud Trace","link":"https://www.llun.me/posts/dev/2024-07-13-opentelemetry-google-cloud-trace-nextjs","date":1720866461000,"content":"<p>NextJS has OpenTelemetry embedded in the framework however, to use it has a few more steps to configure. For Google Cloud Trace, that step including updating <code>next.config.json</code> to exclude library that suppose to run in the server side.</p>\n<p>The official guide from <a href=\"https://nextjs.org/docs/app/building-your-application/optimizing/open-telemetry\" target=\"_blank\">Vercel is here</a> which using OLTP to export the data. However, Google has their own package for exporting trace data <code>@google-cloud/opentelemetry-cloud-trace-exporter</code></p>\n<p><a href=\"https://cloud.google.com/trace/docs/setup/nodejs-ot\" target=\"_blank\">Document in Google</a> shows how to configure the OpenTelemetry which can be use with Vercel document and add to <code>instrumentation.node.ts</code> file. After follow the google document, add <code>google-proto-files</code> into the <code>serverComponentsExternalPackages</code> in <code>next.config.js</code> file and the trace data should appear in the cloud trace dashboard.</p>\n","author":"Maythee Anegboonlap","siteTitle":"@llun story","siteHash":"e492a4c5a091b6624e5872d8d003bc73eb1166cc8f88db58c44e1f8dfb9c7252","entryHash":"9016eccc40273191a55e934bc315a72a6166e9959538cfd65baa6d7a89f8d2b2","category":"Category1"}