(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[197],{9014:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/404",function(){return n(5838)}])},5371:function(e,t,n){"use strict";var r=n(5893),s=n(7294);t.Z=function(e){var t=e.className,n=e.content,i=e.selectBack,c=null;return(0,s.useEffect)((function(){c&&c.scrollTo(0,0)}),[n]),(0,r.jsxs)("article",{ref:function(e){c=e},className:"prose pb-4 max-w-full break-words flex-grow p-6 lg:overflow-auto ".concat(t),children:[(0,r.jsx)("a",{className:"cursor-pointer lg:hidden",onClick:i,children:"\u2190 Back"}),n&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:(0,r.jsx)("a",{href:n.url,target:"_blank",children:n.title})}),(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:n.content}})]}),(0,r.jsx)("div",{className:"pb-8"})]})}},850:function(e,t,n){"use strict";var r=n(8520),s=n.n(r),i=n(5893),c=n(7294),a=n(1574);function u(e,t,n,r,s,i,c){try{var a=e[i](c),u=a.value}catch(o){return void n(o)}a.done?t(u):Promise.resolve(u).then(r,s)}var o=function(e){var t=e.entry,n=e.selectedEntryHash,r=e.selectEntry,s=e.selectSite;return(0,i.jsxs)("div",{className:"rounded px-4 ".concat(n===t.key?"bg-gray-200":"").trim(),children:[(0,i.jsx)("h3",{children:(0,i.jsx)("a",{className:"cursor-pointer",onClick:function(){return r&&r(t.key)},children:t.title})}),(0,i.jsxs)("small",{children:[(0,i.jsx)("a",{className:"cursor-pointer",onClick:function(){return s&&s(t.key)},children:t.site.title}),t.timestamp&&(0,i.jsxs)("span",{children:[", ",(0,a.Z)(1e3*t.timestamp,new Date)]})]})]})};t.Z=function(e){var t=e.className,n=e.entries,r=e.selectEntry,a=e.selectSite,l=e.selectBack,f=(0,c.useState)(""),p=f[0],h=f[1],d=null;return(0,c.useEffect)((function(){d&&d.scrollTo(0,0)}),[n]),(0,i.jsxs)("section",{ref:function(e){d=e},className:"prose pb-4 w-full sm:w-96 flex-shrink-0 p-6 sm:overflow-auto ".concat(t),children:[(0,i.jsx)("a",{className:"cursor-pointer sm:hidden",onClick:l,children:"\u2190 Back"}),n.map((function(e){return(0,i.jsx)(o,{entry:e,selectedEntryHash:p,selectEntry:(t=s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h(t),r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,r(t);case 5:case"end":return e.stop()}}),e)})),function(){var e=this,n=arguments;return new Promise((function(r,s){var i=t.apply(e,n);function c(e){u(i,r,s,c,a,"next",e)}function a(e){u(i,r,s,c,a,"throw",e)}c(void 0)}))}),selectSite:a},"entry-".concat(e.key));var t})),0===n.length&&(0,i.jsx)("div",{children:(0,i.jsx)("h3",{children:"No contents"})},"none"),(0,i.jsx)("div",{className:"pb-8"})]})}},5090:function(e,t,n){"use strict";var r=n(5893),s=(n(7294),n(9008));t.Z=function(){return(0,r.jsxs)(s.default,{children:[(0,r.jsx)("title",{children:"Feeds"}),(0,r.jsx)("meta",{charSet:"utf-8"}),(0,r.jsx)("meta",{httpEquiv:"X-UA-Compatible",content:"IE=Edge"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,r.jsx)("meta",{name:"description",content:"Feeds Aggregator"})]})}},1744:function(e,t,n){"use strict";var r=n(5893),s=n(7294);t.Z=function(e){var t=e.categories,n=e.selectCategory,i=e.selectSite,c=(0,s.useState)(),a=c[0],u=c[1];return(0,r.jsxs)("aside",{className:"prose max-w-none w-full sm:w-48 xl:w-96 flex-shrink-0 p-6 block",children:[(0,r.jsx)("h1",{children:"Feeds"}),(0,r.jsx)("h2",{className:"cursor-pointer",children:(0,r.jsx)("a",{onClick:function(){return i&&i("all")},children:"All sites"})}),t.map((function(e){return(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)("h2",{className:"cursor-pointer",children:(0,r.jsx)("a",{onClick:function(){return u(e.title)},children:e.title})}),e.title===a&&(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{className:"cursor-pointer",children:(0,r.jsx)("a",{onClick:function(){return n&&n(a)},children:"All sites"})}),e.sites.map((function(e){return(0,r.jsx)("li",{className:"cursor-pointer",children:(0,r.jsx)("a",{onClick:function(){return i&&i(e.key)},children:e.title})},e.key)}))]})]},e.title)})),(0,r.jsx)("div",{className:"pb-8"})]})}},8688:function(e,t,n){"use strict";n.d(t,{Sl:function(){return o},c0:function(){return f},CP:function(){return p},cA:function(){return d},V3:function(){return m},C0:function(){return v},L5:function(){return k}});var r=n(8520),s=n.n(r),i=n(2891);function c(e,t,n,r,s,i,c){try{var a=e[i](c),u=a.value}catch(o){return void n(o)}a.done?t(u):Promise.resolve(u).then(r,s)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var i=e.apply(t,n);function a(e){c(i,r,s,a,u,"next",e)}function u(e){c(i,r,s,a,u,"throw",e)}a(void 0)}))}}var u=null;function o(e,t){return l.apply(this,arguments)}function l(){return(l=a(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=4;break}return e.next=3,(0,i.createDbWorker)([t],"".concat(n,"/sqlite.worker.js"),"".concat(n,"/sql-wasm.wasm"));case 3:u=e.sent;case 4:return e.abrupt("return",u);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return{from:"inline",config:{serverMode:"full",requestChunkSize:4096,url:"".concat(e,"/data.sqlite3")}}}function p(e){return h.apply(this,arguments)}function h(){return(h=a(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.query("select category, siteKey, siteTitle from SiteCategories");case 2:return n=e.sent,r=n.reduce((function(e,t){return e[t.category]||(e[t.category]=[]),e[t.category].push({key:t.siteKey,title:t.siteTitle}),e}),{}),e.abrupt("return",Object.keys(r).map((function(e){return{title:e,sites:r[e]}})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e,t){return y.apply(this,arguments)}function y(){return(y=a(s().mark((function e(t,n,r){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r?0:r,e.next=3,t.db.query("select * from EntryCategories where category = ? and entryContentTime is not null order by entryContentTime desc limit 30",[n]);case 3:return i=e.sent,e.abrupt("return",i.map((function(e){return{key:e.entryKey,title:e.entryTitle,site:{key:e.siteKey,title:e.siteTitle},timestamp:e.entryContentTime}})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t){return x.apply(this,arguments)}function x(){return(x=a(s().mark((function e(t,n,r){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r?0:r,e.next=3,t.db.query("select entryKey, siteKey, siteTitle, entryTitle, entryContentTime from EntryCategories where siteKey = ? order by entryContentTime desc limit 30",[n]);case 3:return i=e.sent,e.abrupt("return",i.map((function(e){return{key:e.entryKey,title:e.entryTitle,site:{key:e.siteKey,title:e.siteTitle},timestamp:e.entryContentTime}})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return w.apply(this,arguments)}function w(){return(w=a(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n?0:n,e.next=3,t.db.query("select entryKey, siteKey, siteTitle, entryTitle, entryContentTime from EntryCategories where entryContentTime is not null order by entryContentTime desc limit 30");case 3:return r=e.sent,e.abrupt("return",r.map((function(e){return{key:e.entryKey,title:e.entryTitle,site:{key:e.siteKey,title:e.siteTitle},timestamp:e.entryContentTime}})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t){return b.apply(this,arguments)}function b(){return(b=a(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.query("select title, content, url, siteKey from Entries where key = ?",[n]);case 2:if(0!==(r=e.sent).length){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",r[0]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},5838:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var r=n(8520),s=n.n(r),i=n(5893),c=n(7294),a=n(1163),u=n(5371),o=n(850),l=n(5090),f=n(1744),p=n(8688);function h(e,t,n,r,s,i,c){try{var a=e[i](c),u=a.value}catch(o){return void n(o)}a.done?t(u):Promise.resolve(u).then(r,s)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var i=e.apply(t,n);function c(e){h(i,r,s,c,a,"next",e)}function a(e){h(i,r,s,c,a,"throw",e)}c(void 0)}))}}function y(){var e=(0,c.useState)("loading"),t=e[0],n=e[1],r=(0,c.useState)([]),h=r[0],y=r[1],m=(0,c.useState)([]),x=m[0],v=m[1],w=(0,c.useState)(null),k=w[0],b=w[1],j=(0,a.useRouter)(),g=d(s().mark((function e(t){var n,r,i,c,a,u,o,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,(0,p.Sl)((0,p.c0)(j.basePath),j.basePath);case 4:n=e.sent,e.t0=t.type,e.next="categories"===e.t0?8:"sites"===e.t0?15:"entries"===e.t0?29:42;break;case 8:return r=t.category,e.next=11,(0,p.cA)(n,r);case 11:return i=e.sent,v(i),b(null),e.abrupt("return");case 15:if("all"!==(c=t.siteHash)){e.next=22;break}return e.next=19,(0,p.C0)(n);case 19:e.t1=e.sent,e.next=25;break;case 22:return e.next=24,(0,p.V3)(n,c);case 24:e.t1=e.sent;case 25:return a=e.t1,v(a),b(null),e.abrupt("return");case 29:return u=t.entryHash,e.next=32,(0,p.L5)(n,u);case 32:if(o=e.sent){e.next=35;break}return e.abrupt("return");case 35:if(0!==x.length){e.next=40;break}return e.next=38,(0,p.V3)(n,o.siteKey);case 38:l=e.sent,v(l);case 40:return b(o),e.abrupt("return");case 42:case"end":return e.stop()}}),e)})));(0,c.useEffect)((function(){d(s().mark((function e(){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.Sl)((0,p.c0)(j.basePath),j.basePath);case 2:return t=e.sent,e.next=5,(0,p.CP)(t);case 5:r=e.sent,y(r),n("loaded");case 8:case"end":return e.stop()}}),e)})))()}),[t]),(0,c.useEffect)((function(){var e=function(e){var t=e.split("/");if(t.shift(),2!==t.length)return null;switch(t[0]){case"categories":return{type:t[0],category:t[1]};case"sites":return{type:t[0],siteHash:t[1]};case"entries":return{type:t[0],entryHash:t[1]};default:return null}}(j.asPath);e?g(e):j.push("/sites/all")}),[j.asPath]);var C=d(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j.push("/categories/".concat(t));case 1:case"end":return e.stop()}}),e)}))),T=d(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j.push("/sites/".concat(t));case 1:case"end":return e.stop()}}),e)}))),N=d(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j.push("/entries/".concat(t));case 1:case"end":return e.stop()}}),e)})));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.Z,{}),(0,i.jsxs)("div",{className:"container mx-auto flex flex-row w-screen h-screen",children:[(0,i.jsx)(f.Z,{categories:h,selectCategory:C,selectSite:T}),(0,i.jsx)(o.Z,{entries:x,selectEntry:N}),(0,i.jsx)(u.Z,{content:k})]})]})}}},function(e){e.O(0,[204,774,888,179],(function(){return t=9014,e(e.s=t);var t}));var t=e.O();_N_E=t}]);