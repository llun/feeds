(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[197],{6141:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/404",function(){return s(9114)}])},9114:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Home}});var a=s(5893),n=s(1163),c=s(7294),o=s(9952),i=s(9404),r=s(1753),l=s(8127),u=s(90),h=s(8990);function Home(){let[e,t]=(0,c.useState)("loading"),[s,d]=(0,c.useState)("categories"),[f,g]=(0,c.useState)([]),[x,m]=(0,c.useState)(null),[p,_]=(0,c.useState)(null),w=(0,n.useRouter)();return(0,c.useEffect)(()=>{(async()=>{let s=(0,h.hX)(w.asPath);if(!s){w.push("/sites/all");return}if("loading"===e){let e=(0,u.c)(w.basePath),[s,a]=await Promise.all([e.getCategories(),e.countAllEntries()]);_(a),g(s),t("loaded")}await (0,h.GJ)(s,w.basePath,m,d)})()},[e,w.asPath]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{}),(0,a.jsxs)("div",{className:"prose max-w-none container mx-auto flex flex-row w-screen h-screen",children:["loading"===e&&(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("strong",{className:"font-serif text-4xl",children:"Loading database"})}),"loaded"===e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Z,{className:(0,h.BJ)(s),categories:f,totalEntries:p,selectCategory:e=>w.push("/categories/".concat(e)),selectSite:e=>w.push("/sites/".concat(e))}),(0,a.jsx)(i.Z,{className:(0,h.EH)(s),basePath:w.basePath,locationState:(0,h.hX)(w.asPath),selectBack:()=>d("categories"),selectSite:e=>w.push("/sites/".concat(e)),selectEntry:(e,t,s)=>w.push("".concat("category"===e?"categories":"sites","/").concat(t,"/entries/").concat(s))}),(0,a.jsx)(o.Z,{className:(0,h.Dq)(s),content:x,selectBack:()=>{let e=(0,h.hX)(w.asPath);if("entry"!==e.type)return;let{parent:t}=e,{type:s,key:a}=t;w.push("".concat("category"===s?"categories":"sites","/").concat(a))}})]})]})]})}}},function(e){e.O(0,[736,918,774,888,179],function(){return e(e.s=6141)}),_N_E=e.O()}]);