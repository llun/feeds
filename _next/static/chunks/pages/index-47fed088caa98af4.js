(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(7626)}])},7626:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return F},default:function(){return A}});var r=n(8520),s=n.n(r),i=n(5893),c=n(7294),a=n(1163),u=function(e){var t=e.className,n=e.content,r=e.selectBack,s=null;return(0,c.useEffect)((function(){s&&s.scrollTo(0,0)}),[n]),(0,i.jsxs)("article",{ref:function(e){s=e},className:"prose pb-4 max-w-full break-words flex-grow p-6 lg:overflow-auto ".concat(t),children:[(0,i.jsx)("a",{className:"cursor-pointer lg:hidden",onClick:r,children:"\u2190 Back"}),n&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{children:(0,i.jsx)("a",{href:n.url,target:"_blank",children:n.title})}),(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:n.content}})]}),(0,i.jsx)("div",{className:"pb-8"})]})},o=n(1574);function l(e,t,n,r,s,i,c){try{var a=e[i](c),u=a.value}catch(o){return void n(o)}a.done?t(u):Promise.resolve(u).then(r,s)}var f=function(e){var t=e.entry,n=e.selectedEntryHash,r=e.selectEntry,s=e.selectSite;return(0,i.jsxs)("div",{className:"rounded px-4 ".concat(n===t.key?"bg-gray-200":"").trim(),children:[(0,i.jsx)("h3",{children:(0,i.jsx)("a",{className:"cursor-pointer",onClick:function(){return r&&r(t.key)},children:t.title})}),(0,i.jsxs)("small",{children:[(0,i.jsx)("a",{className:"cursor-pointer",onClick:function(){return s&&s(t.key)},children:t.site.title}),t.timestamp&&(0,i.jsxs)("span",{children:[", ",(0,o.Z)(1e3*t.timestamp,new Date)]})]})]})},p=function(e){var t=e.className,n=e.entries,r=e.selectEntry,a=e.selectSite,u=e.selectBack,o=(0,c.useState)(""),p=o[0],h=o[1],y=null;return(0,c.useEffect)((function(){y&&y.scrollTo(0,0)}),[n]),(0,i.jsxs)("section",{ref:function(e){y=e},className:"prose pb-4 w-full sm:w-96 flex-shrink-0 p-6 sm:overflow-auto ".concat(t),children:[(0,i.jsx)("a",{className:"cursor-pointer sm:hidden",onClick:u,children:"\u2190 Back"}),n.map((function(e){return(0,i.jsx)(f,{entry:e,selectedEntryHash:p,selectEntry:(t=s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h(t),r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,r(t);case 5:case"end":return e.stop()}}),e)})),function(){var e=this,n=arguments;return new Promise((function(r,s){var i=t.apply(e,n);function c(e){l(i,r,s,c,a,"next",e)}function a(e){l(i,r,s,c,a,"throw",e)}c(void 0)}))}),selectSite:a},"entry-".concat(e.key));var t})),0===n.length&&(0,i.jsx)("div",{children:(0,i.jsx)("h3",{children:"No contents"})},"none"),(0,i.jsx)("div",{className:"pb-8"})]})},h=n(9008),y=function(){return(0,i.jsxs)(h.default,{children:[(0,i.jsx)("title",{children:"Feeds"}),(0,i.jsx)("meta",{charSet:"utf-8"}),(0,i.jsx)("meta",{httpEquiv:"X-UA-Compatible",content:"IE=Edge"}),(0,i.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,i.jsx)("meta",{name:"description",content:"Feeds Aggregator"})]})},d=function(e){var t=e.categories,n=e.selectCategory,r=e.selectSite,s=(0,c.useState)(),a=s[0],u=s[1];return(0,i.jsxs)("aside",{className:"prose max-w-none w-full sm:w-48 xl:w-96 flex-shrink-0 p-6 block",children:[(0,i.jsx)("h1",{children:"Feeds"}),(0,i.jsx)("h2",{className:"cursor-pointer",children:(0,i.jsx)("a",{onClick:function(){return r&&r("all")},children:"All sites"})}),t.map((function(e){return(0,i.jsxs)(c.Fragment,{children:[(0,i.jsx)("h2",{className:"cursor-pointer",children:(0,i.jsx)("a",{onClick:function(){return u(e.title)},children:e.title})}),e.title===a&&(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{className:"cursor-pointer",children:(0,i.jsx)("a",{onClick:function(){return n&&n(a)},children:"All sites"})}),e.sites.map((function(e){return(0,i.jsx)("li",{className:"cursor-pointer",children:(0,i.jsx)("a",{onClick:function(){return r&&r(e.key)},children:e.title})},e.key)}))]})]},e.title)})),(0,i.jsx)("div",{className:"pb-8"})]})},x=n(2891);function m(e,t,n,r,s,i,c){try{var a=e[i](c),u=a.value}catch(o){return void n(o)}a.done?t(u):Promise.resolve(u).then(r,s)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var i=e.apply(t,n);function c(e){m(i,r,s,c,a,"next",e)}function a(e){m(i,r,s,c,a,"throw",e)}c(void 0)}))}}var w=null;function k(e){return j.apply(this,arguments)}function j(){return(j=v(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w){e.next=4;break}return e.next=3,(0,x.createDbWorker)([t],"/sqlite.worker.js","/sql-wasm.wasm");case 3:w=e.sent;case 4:return e.abrupt("return",w);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return g.apply(this,arguments)}function g(){return(g=v(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.query("select category, siteKey, siteTitle from SiteCategories");case 2:return n=e.sent,r=n.reduce((function(e,t){return e[t.category]||(e[t.category]=[]),e[t.category].push({key:t.siteKey,title:t.siteTitle}),e}),{}),e.abrupt("return",Object.keys(r).map((function(e){return{title:e,sites:r[e]}})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t){return T.apply(this,arguments)}function T(){return(T=v(s().mark((function e(t,n,r){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r?0:r,e.next=3,t.db.query("select * from EntryCategories where category = ? and entryContentTime is not null order by entryContentTime desc limit 30",[n]);case 3:return i=e.sent,e.abrupt("return",i.map((function(e){return{key:e.entryKey,title:e.entryTitle,site:{key:e.siteKey,title:e.siteTitle},timestamp:e.entryContentTime}})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t){return E.apply(this,arguments)}function E(){return(E=v(s().mark((function e(t,n,r){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r?0:r,e.next=3,t.db.query("select entryKey, siteKey, siteTitle, entryTitle, entryContentTime from EntryCategories where siteKey = ? order by entryContentTime desc limit 30",[n]);case 3:return i=e.sent,e.abrupt("return",i.map((function(e){return{key:e.entryKey,title:e.entryTitle,site:{key:e.siteKey,title:e.siteTitle},timestamp:e.entryContentTime}})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return S.apply(this,arguments)}function S(){return(S=v(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n?0:n,e.next=3,t.db.query("select entryKey, siteKey, siteTitle, entryTitle, entryContentTime from EntryCategories where entryContentTime is not null order by entryContentTime desc limit 30");case 3:return r=e.sent,e.abrupt("return",r.map((function(e){return{key:e.entryKey,title:e.entryTitle,site:{key:e.siteKey,title:e.siteTitle},timestamp:e.entryContentTime}})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e,t){return P.apply(this,arguments)}function P(){return(P=v(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.query("select title, content, url, siteKey from Entries where key = ?",[n]);case 2:if(0!==(r=e.sent).length){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",r[0]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t,n,r,s,i,c){try{var a=e[i](c),u=a.value}catch(o){return void n(o)}a.done?t(u):Promise.resolve(u).then(r,s)}function H(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var i=e.apply(t,n);function c(e){q(i,r,s,c,a,"next",e)}function a(e){q(i,r,s,c,a,"throw",e)}c(void 0)}))}}var F=!0;function A(e){var t=e.config,n=(0,c.useState)("loading"),r=n[0],o=n[1],l=(0,c.useState)([]),f=l[0],h=l[1],x=(0,c.useState)([]),m=x[0],v=x[1],w=(0,c.useState)(null),j=w[0],g=w[1],T=(0,a.useRouter)(),E=H(s().mark((function e(n){var r,i,c,a,u,o,l,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,k(t);case 4:r=e.sent,e.t0=n.type,e.next="categories"===e.t0?8:"sites"===e.t0?15:"entries"===e.t0?29:42;break;case 8:return i=n.category,e.next=11,C(r,i);case 11:return c=e.sent,v(c),g(null),e.abrupt("return");case 15:if("all"!==(a=n.siteHash)){e.next=22;break}return e.next=19,_(r);case 19:e.t1=e.sent,e.next=25;break;case 22:return e.next=24,N(r,a);case 24:e.t1=e.sent;case 25:return u=e.t1,v(u),g(null),e.abrupt("return");case 29:return o=n.entryHash,e.next=32,K(r,o);case 32:if(l=e.sent){e.next=35;break}return e.abrupt("return");case 35:if(0!==m.length){e.next=40;break}return e.next=38,N(r,l.siteKey);case 38:f=e.sent,v(f);case 40:return g(l),e.abrupt("return");case 42:case"end":return e.stop()}}),e)})));(0,c.useEffect)((function(){H(s().mark((function e(){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:return n=e.sent,e.next=5,b(n);case 5:r=e.sent,h(r),o("loaded");case 8:case"end":return e.stop()}}),e)})))()}),[r]),(0,c.useEffect)((function(){var e=function(e){var t=e.split("/");if(t.shift(),2!==t.length)return null;switch(t[0]){case"categories":return{type:t[0],category:t[1]};case"sites":return{type:t[0],siteHash:t[1]};case"entries":return{type:t[0],entryHash:t[1]};default:return null}}(T.asPath);e?E(e):T.push("/sites/all")}),[T.asPath]);var S=H(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T.push("/categories/".concat(t));case 1:case"end":return e.stop()}}),e)}))),P=H(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T.push("/sites/".concat(t));case 1:case"end":return e.stop()}}),e)}))),q=H(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T.push("/entries/".concat(t));case 1:case"end":return e.stop()}}),e)})));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y,{}),(0,i.jsxs)("div",{className:"container mx-auto flex flex-row w-screen h-screen",children:[(0,i.jsx)(d,{categories:f,selectCategory:S,selectSite:P}),(0,i.jsx)(p,{entries:m,selectEntry:q}),(0,i.jsx)(u,{content:j})]})]})}}},function(e){e.O(0,[204,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);