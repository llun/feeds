(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return __webpack_require__(4186)}])},4186:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return Home}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5893),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7294),next_router__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1163),_lib_components_Entry__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9451),_lib_components_EntryList__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6724),_lib_components_Meta__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(5413),_lib_components_CategoryList__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(911),_lib_storage__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(386),_lib_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(3047);function Home(){let[status,setStatus]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)("loading"),[pageState,setPageState]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)("categories"),[categories,setCategories]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[content,setContent]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),[totalEntries,setTotalEntries]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),router=(0,next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter)();return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{(async()=>{let stateLocation=(0,_lib_utils__WEBPACK_IMPORTED_MODULE_8__.hX)(router.asPath);if(!stateLocation){router.push("/sites/all");return}if("loading"===status){let worker=await (0,_lib_storage__WEBPACK_IMPORTED_MODULE_7__.Sl)((0,_lib_storage__WEBPACK_IMPORTED_MODULE_7__.c0)(router.basePath),router.basePath),[categories,totalEntries]=await Promise.all([(0,_lib_storage__WEBPACK_IMPORTED_MODULE_7__.CP)(worker),(0,_lib_storage__WEBPACK_IMPORTED_MODULE_7__.M8)(worker)]);setTotalEntries(totalEntries),setCategories(categories),setStatus("loaded")}await (0,_lib_utils__WEBPACK_IMPORTED_MODULE_8__.GJ)(stateLocation,router.basePath,setContent,setPageState)})()},[status,router.asPath]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_lib_components_Meta__WEBPACK_IMPORTED_MODULE_5__.Z,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"prose max-w-none container mx-auto flex flex-row w-screen h-screen",children:["loading"===status&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"p-6",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("strong",{className:"font-serif text-4xl",children:"Loading database"})}),"loaded"===status&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_lib_components_CategoryList__WEBPACK_IMPORTED_MODULE_6__.Z,{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_8__.BJ)(pageState),categories:categories,totalEntries:totalEntries,selectCategory:category=>router.push("/categories/".concat(category)),selectSite:site=>router.push("/sites/".concat(site))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_lib_components_EntryList__WEBPACK_IMPORTED_MODULE_4__.Z,{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_8__.EH)(pageState),basePath:router.basePath,locationState:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_8__.hX)(router.asPath),selectBack:()=>setPageState("categories"),selectSite:site=>router.push("/sites/".concat(site)),selectEntry:(parentType,parentKey,entryKey)=>router.push("".concat("category"===parentType?"categories":"sites","/").concat(parentKey,"/entries/").concat(entryKey))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_lib_components_Entry__WEBPACK_IMPORTED_MODULE_3__.Z,{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_8__.Dq)(pageState),content:content,selectBack(){let locationState=(0,_lib_utils__WEBPACK_IMPORTED_MODULE_8__.hX)(router.asPath);if("entry"!==locationState.type)return;let{parent}=locationState,{type,key}=parent;router.push("".concat("category"===type?"categories":"sites","/").concat(key))}})]})]})]})}}},function(__webpack_require__){__webpack_require__.O(0,[945,552,774,888,179],function(){return __webpack_require__(__webpack_require__.s=8312)}),_N_E=__webpack_require__.O()}]);