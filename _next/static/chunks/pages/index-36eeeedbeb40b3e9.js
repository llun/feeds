(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(4186)}])},4186:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var a=s(5893),c=s(7294),n=s(1163),i=s(9451),o=s(6724),l=s(5413),r=s(911),u=s(386),h=s(3047);function d(){let[e,t]=(0,c.useState)("loading"),[s,d]=(0,c.useState)("categories"),[f,g]=(0,c.useState)([]),[x,p]=(0,c.useState)(null),[P,w]=(0,c.useState)(null),_=(0,n.useRouter)();return(0,c.useEffect)(()=>{(async()=>{let s=(0,h.hX)(_.asPath);if(!s){_.push("/sites/all");return}if("loading"===e){let a=await (0,u.Sl)((0,u.c0)(_.basePath),_.basePath),[c,n]=await Promise.all([(0,u.CP)(a),(0,u.M8)(a)]);w(n),g(c),t("loaded")}await (0,h.GJ)(s,_.basePath,p,d)})()},[e,_.asPath]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{}),(0,a.jsxs)("div",{className:"prose max-w-none container mx-auto flex flex-row w-screen h-screen",children:["loading"===e&&(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("strong",{className:"font-serif text-4xl",children:"Loading database"})}),"loaded"===e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Z,{className:(0,h.BJ)(s),categories:f,totalEntries:P,selectCategory:e=>_.push("/categories/".concat(e)),selectSite:e=>_.push("/sites/".concat(e))}),(0,a.jsx)(o.Z,{className:(0,h.EH)(s),basePath:_.basePath,locationState:(0,h.hX)(_.asPath),selectBack:()=>d("categories"),selectSite:e=>_.push("/sites/".concat(e)),selectEntry:(e,t,s)=>_.push("".concat("category"===e?"categories":"sites","/").concat(t,"/entries/").concat(s))}),(0,a.jsx)(i.Z,{className:(0,h.Dq)(s),content:x,selectBack(){let e=(0,h.hX)(_.asPath);if("entry"!==e.type)return;let{parent:t}=e,{type:s,key:a}=t;_.push("".concat("category"===s?"categories":"sites","/").concat(a))}})]})]})]})}}},function(e){e.O(0,[945,552,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);