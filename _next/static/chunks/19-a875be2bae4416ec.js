"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[19],{8217:function(e,t,n){var r=n(5893),s=n(7294);t.Z=function(e){var t=e.className,n=e.categories,i=e.totalEntries,a=e.selectCategory,c=e.selectSite,u=(0,s.useState)(),o=u[0],l=u[1];return(0,r.jsxs)("aside",{className:"w-full sm:w-1/3 xl:w-1/5 flex-shrink-0 p-6 sm:overflow-auto ".concat(t),children:[(0,r.jsx)("h1",{className:"font-serif",children:"Feeds"}),(0,r.jsxs)("h2",{className:"cursor-pointer",children:[(0,r.jsx)("a",{className:"font-serif no-underline hover:underline mr-2",onClick:function(){return c&&c("all")},children:"All sites"}),null!==i&&(0,r.jsxs)("small",{className:"text-sm font-light",children:["(",i,")"]})]}),n.map((function(e){return(0,r.jsxs)(s.Fragment,{children:[(0,r.jsxs)("h2",{className:"cursor-pointer",children:[(0,r.jsx)("a",{className:"font-serif no-underline hover:underline mr-2",onClick:function(){return l(e.title)},children:e.title}),(0,r.jsxs)("small",{className:"text-sm font-light",children:["(",e.totalEntries,")"]})]}),e.title===o&&(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{className:"cursor-pointer",children:(0,r.jsx)("a",{className:"font-serif no-underline hover:underline",onClick:function(){return a&&a(o)},children:"All sites"})}),e.sites.map((function(e){return(0,r.jsxs)("li",{className:"cursor-pointer",children:[(0,r.jsx)("a",{className:"font-serif no-underline hover:underline mr-2",onClick:function(){return c&&c(e.key)},children:e.title}),(0,r.jsxs)("small",{className:"text-sm font-light",children:["(",e.totalEntries,")"]})]},e.key)}))]})]},e.title)})),(0,r.jsx)("div",{className:"pb-8"})]})}},5371:function(e,t,n){var r=n(5893),s=n(1574),i=n(7294);t.Z=function(e){var t=e.className,n=e.content,a=e.selectBack,c=null;return(0,i.useEffect)((function(){c&&c.scrollTo(0,0)}),[n]),(0,r.jsxs)("article",{ref:function(e){c=e},className:"pb-4 max-w-full break-words flex-grow p-6 xl:overflow-auto ".concat(t),children:[(0,r.jsx)("a",{className:"cursor-pointer xl:hidden",onClick:a,children:"\u2190 Back"}),n&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:(0,r.jsx)("a",{className:"font-serif font-bold no-underline hover:underline",href:n.url,target:"_blank",children:n.title})}),(0,r.jsxs)("div",{className:"xl:hidden",children:[(0,r.jsx)("strong",{children:n.siteTitle}),(0,r.jsxs)("span",{children:[", ",(0,s.Z)(1e3*n.timestamp,new Date)]})]}),(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:n.content}})]}),(0,r.jsx)("div",{className:"pb-8"})]})}},850:function(e,t,n){var r=n(4051),s=n.n(r),i=n(5893),a=n(7294),c=n(1574),u=n(8688);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t,n,r,s,i,a){try{var c=e[i](a),u=c.value}catch(o){return void n(o)}c.done?t(u):Promise.resolve(u).then(r,s)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var i=e.apply(t,n);function a(e){l(i,r,s,a,c,"next",e)}function c(e){l(i,r,s,a,c,"throw",e)}a(void 0)}))}}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(u){c=!0,s=u}finally{try{a||null==n.return||n.return()}finally{if(c)throw s}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=function(e){var t=e.index,n=e.entry,r=e.selectedEntryHash,s=e.selectEntry,a=e.selectSite;return(0,i.jsxs)("div",{className:"rounded px-4 ".concat(r===n.key?"bg-gray-200":"").trim(),children:[(0,i.jsx)("h3",{children:(0,i.jsxs)("a",{className:"font-serif no-underline hover:underline cursor-pointer",onClick:function(){return s&&s(n.key)},children:[t+1,". ",n.title]})}),(0,i.jsxs)("small",{children:[(0,i.jsx)("a",{className:"cursor-pointer",onClick:function(){return a&&a(n.site.key)},children:n.site.title}),n.timestamp&&(0,i.jsxs)("span",{children:[", ",(0,c.Z)(1e3*n.timestamp,new Date)]})]})]})};t.Z=function(e){var t=e.className,n=e.basePath,r=e.locationState,c=e.selectEntry,o=e.selectSite,l=e.selectBack,d=(0,a.useState)("loading"),h=d[0],m=d[1],x=(0,a.useState)([]),v=x[0],b=x[1],k=(0,a.useState)(0),w=k[0],g=k[1],j=(0,a.useState)(""),E=j[0],C=j[1],N=(0,a.useState)(0),T=N[0],S=N[1],K=(0,a.useState)(0),q=K[0],A=K[1],P=null,M=function(){var e=f(s().mark((function e(t,n){var r,i,a,c,o,l,f,y,d,h,m,x,v,b,k,w,g,j,E=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=E.length>2&&void 0!==E[2]?E[2]:0,e.next=3,(0,u.Sl)((0,u.c0)(t),t);case 3:i=e.sent,e.t0=n.type,e.next="category"===e.t0?7:"site"===e.t0?16:"entry"===e.t0?32:58;break;case 7:return a=n.category,e.t1=p,e.next=11,Promise.all([(0,u.cA)(i,a,r),(0,u.pW)(i,a)]);case 11:return e.t2=e.sent,c=(0,e.t1)(e.t2,2),o=c[0],l=c[1],e.abrupt("return",{entries:o,totalEntry:l});case 16:if(f=n.siteKey,e.t3=p,"all"!==f){e.next=24;break}return e.next=21,Promise.all([(0,u.C0)(i,r),(0,u.M8)(i)]);case 21:e.t4=e.sent,e.next=27;break;case 24:return e.next=26,Promise.all([(0,u.V3)(i,f,r),(0,u.J4)(i,f)]);case 26:e.t4=e.sent;case 27:return e.t5=e.t4,y=(0,e.t3)(e.t5,2),d=y[0],h=y[1],e.abrupt("return",{entries:d,totalEntry:h});case 32:if(m=n.parent,x=m.key,"category"!==m.type){e.next=43;break}return e.t6=p,e.next=38,Promise.all([(0,u.cA)(i,x,r),(0,u.pW)(i,x)]);case 38:return e.t7=e.sent,v=(0,e.t6)(e.t7,2),b=v[0],k=v[1],e.abrupt("return",{entries:b,totalEntry:k});case 43:if(e.t8=p,"all"!==x){e.next=50;break}return e.next=47,Promise.all([(0,u.C0)(i,r),(0,u.M8)(i)]);case 47:e.t9=e.sent,e.next=53;break;case 50:return e.next=52,Promise.all([(0,u.V3)(i,x,r),(0,u.J4)(i,x)]);case 52:e.t9=e.sent;case 53:return e.t10=e.t9,w=(0,e.t8)(e.t10,2),g=w[0],j=w[1],e.abrupt("return",{entries:g,totalEntry:j});case 58:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){P&&r&&("entry"===r.type&&v.length>0||function(){var e=f(s().mark((function e(t){var i,a,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(n,r);case 2:i=e.sent,a=i.entries,c=i.totalEntry,m("loaded"),b(a),g(c),S(0),t.scrollTo(0,0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(P))}),[r]);var _=function(){var e=f(s().mark((function e(t){var i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("loading"!==h){e.next=2;break}return e.abrupt("return");case 2:if(v.length!==w){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,M(n,r,t);case 6:i=e.sent,a=i.entries,b(v.concat(a));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H="entry"===r.type?r.parent.type:r.type,Z="entry"===r.type?r.parent.key:"category"===r.type?r.category:r.siteKey;return(0,i.jsxs)("section",{ref:function(e){P=e},onScroll:function(e){var t=e.currentTarget,n=Math.floor(.8*t.scrollHeight);t.scrollTop+t.clientHeight<n||"loading"!==h&&(e.timeStamp-q<2e3||(A(e.timeStamp),window.requestAnimationFrame(f(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m("loading"),e.next=3,_(T+1);case 3:S(T+1),m("loaded");case 5:case"end":return e.stop()}}),e)}))))))},className:"pb-4 w-full sm:w-2/3 xl:w-2/6 flex-shrink-0 p-6 overflow-auto ".concat(t),children:[(0,i.jsx)("a",{className:"cursor-pointer sm:hidden",onClick:l,children:"\u2190 Back"}),v.map((function(e,t){return(0,i.jsx)(y,{index:t,entry:e,selectedEntryHash:E,selectEntry:function(){var e=f(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C(t),c){e.next=3;break}return e.abrupt("return");case 3:c(H,Z,t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),selectSite:o},e.key)})),0===v.length&&(0,i.jsx)("div",{children:(0,i.jsx)("h3",{children:"No contents"})},"none"),(0,i.jsx)("div",{className:"pb-8"})]})}},5090:function(e,t,n){var r=n(5893),s=(n(7294),n(9008));t.Z=function(){return(0,r.jsxs)(s.default,{children:[(0,r.jsx)("title",{children:"Feeds"}),(0,r.jsx)("meta",{charSet:"utf-8"}),(0,r.jsx)("meta",{httpEquiv:"X-UA-Compatible",content:"IE=Edge"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,r.jsx)("meta",{name:"description",content:"Feeds Aggregator"})]})}},8688:function(e,t,n){n.d(t,{Sl:function(){return l},c0:function(){return p},CP:function(){return y},cA:function(){return h},V3:function(){return x},M8:function(){return b},J4:function(){return w},pW:function(){return j},C0:function(){return C},L5:function(){return T}});var r=n(4051),s=n.n(r),i=n(2891);function a(e,t,n,r,s,i,a){try{var c=e[i](a),u=c.value}catch(o){return void n(o)}c.done?t(u):Promise.resolve(u).then(r,s)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var i=e.apply(t,n);function c(e){a(i,r,s,c,u,"next",e)}function u(e){a(i,r,s,c,u,"throw",e)}c(void 0)}))}}var u=30,o=null;function l(e,t){return f.apply(this,arguments)}function f(){return(f=c(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=4;break}return e.next=3,(0,i.createDbWorker)([t],"".concat(n,"/sqlite.worker.js"),"".concat(n,"/sql-wasm.wasm"));case 3:o=e.sent;case 4:return e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return{from:"inline",config:{serverMode:"full",requestChunkSize:4096,url:"".concat(e,"/data.sqlite3")}}}function y(e){return d.apply(this,arguments)}function d(){return(d=c(s().mark((function e(t){var n,r,i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.query("select category, siteKey, siteTitle from SiteCategories");case 2:return n=e.sent,e.next=5,t.db.query("select category, count(*) as totalEntries from EntryCategories group by category");case 5:return r=e.sent.reduce((function(e,t){return e[t.category]=t.totalEntries,e}),{}),e.next=8,t.db.query("select siteKey, count(*) as totalEntries from EntryCategories group by siteKey;");case 8:return i=e.sent.reduce((function(e,t){return e[t.siteKey]=t.totalEntries,e}),{}),a=n.reduce((function(e,t){return e[t.category]||(e[t.category]={totalEntries:r[t.category],sites:[]}),e[t.category].sites.push({key:t.siteKey,title:t.siteTitle,totalEntries:i[t.siteKey]}),e}),{}),e.abrupt("return",Object.keys(a).map((function(e){return{title:e,sites:a[e].sites,totalEntries:a[e].totalEntries}})));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t){return m.apply(this,arguments)}function m(){return(m=c(s().mark((function e(t,n){var r,i,a,c=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:0,i=r*u,e.next=4,t.db.query("select * from EntryCategories where category = ? and entryContentTime is not null order by entryContentTime desc limit ? offset ?",[n,u,i]);case 4:return a=e.sent,e.abrupt("return",a.map((function(e){return{key:e.entryKey,title:e.entryTitle,site:{key:e.siteKey,title:e.siteTitle},timestamp:e.entryContentTime}})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t){return v.apply(this,arguments)}function v(){return(v=c(s().mark((function e(t,n){var r,i,a,c=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:0,i=r*u,e.next=4,t.db.query("select entryKey, siteKey, siteTitle, entryTitle, entryContentTime from EntryCategories where siteKey = ? order by entryContentTime desc limit ? offset ?",[n,u,i]);case 4:return a=e.sent,e.abrupt("return",a.map((function(e){return{key:e.entryKey,title:e.entryTitle,site:{key:e.siteKey,title:e.siteTitle},timestamp:e.entryContentTime}})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return k.apply(this,arguments)}function k(){return(k=c(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.query("select count(*) as total from EntryCategories");case 2:return n=e.sent,e.abrupt("return",n[0].total);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t){return g.apply(this,arguments)}function g(){return(g=c(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.query("select count(*) as total from EntryCategories where siteKey = ?",[n]);case 2:return r=e.sent,e.abrupt("return",r[0].total);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t){return E.apply(this,arguments)}function E(){return(E=c(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.query("select count(*) as total from EntryCategories where category = ?",[n]);case 2:return r=e.sent,e.abrupt("return",r[0].total);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return N.apply(this,arguments)}function N(){return(N=c(s().mark((function e(t){var n,r,i,a=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:0,r=n*u,e.next=4,t.db.query("select entryKey, siteKey, siteTitle, entryTitle, entryContentTime from EntryCategories where entryContentTime is not null order by entryContentTime desc limit ? offset ?",[u,r]);case 4:return i=e.sent,e.abrupt("return",i.map((function(e){return{key:e.entryKey,title:e.entryTitle,site:{key:e.siteKey,title:e.siteTitle},timestamp:e.entryContentTime}})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t){return S.apply(this,arguments)}function S(){return(S=c(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.query("select title, content, url, siteKey, siteTitle, contentTime as timestamp from Entries where key = ?",[n]);case 2:if(0!==(r=e.sent).length){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",r[0]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2461:function(e,t,n){n.d(t,{Dq:function(){return c},EH:function(){return u},BJ:function(){return o},hX:function(){return l},GJ:function(){return f}});var r=n(4051),s=n.n(r),i=(n(7294),n(8688));function a(e,t,n,r,s,i,a){try{var c=e[i](a),u=c.value}catch(o){return void n(o)}c.done?t(u):Promise.resolve(u).then(r,s)}var c=function(e){switch(e){case"article":return"block";default:return"hidden xl:block"}},u=function(e){switch(e){case"article":return"hidden xl:block";case"entries":return"block";default:return"hidden sm:block"}},o=function(e){switch(e){case"article":return"hidden xl:block";case"entries":return"hidden sm:block";default:return"block"}},l=function(e){var t=e.split("/");if(t.shift(),![2,4].includes(t.length))return null;if(2===t.length){if(!t[1].trim())return null;switch(t[0]){case"categories":return{type:"category",category:t[1]};case"sites":return{type:"site",siteKey:t[1]};default:return null}}return t[3].trim()&&["categories","sites"].includes(t[0])?"entries"!==t[2]?null:{type:"entry",entryKey:t[3],parent:{type:"categories"===t[0]?"category":"site",key:t[1]}}:null},f=function(){var e,t=(e=s().mark((function e(t,n,r,a){var c,u,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,(0,i.Sl)((0,i.c0)(n),n);case 4:c=e.sent,e.t0=t.type,e.next="category"===e.t0?8:"site"===e.t0?11:"entry"===e.t0?14:23;break;case 8:case 11:return r(null),a("entries"),e.abrupt("return");case 14:return u=t.entryKey,e.next=17,(0,i.L5)(c,u);case 17:if(o=e.sent){e.next=20;break}return e.abrupt("return");case 20:return r(o),a("article"),e.abrupt("return");case 23:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,s){var i=e.apply(t,n);function c(e){a(i,r,s,c,u,"next",e)}function u(e){a(i,r,s,c,u,"throw",e)}c(void 0)}))});return function(e,n,r,s){return t.apply(this,arguments)}}()}}]);