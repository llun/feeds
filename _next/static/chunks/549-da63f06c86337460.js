"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[549],{9907:function(e,t,n){var s=n(5893),r=n(7294);let i=e=>{let{className:t,categories:n,totalEntries:i,selectCategory:a,selectSite:l}=e,[c,o]=(0,r.useState)();return(0,s.jsxs)("aside",{className:"w-full sm:w-1/3 xl:w-1/5 flex-shrink-0 p-6 sm:overflow-auto overscroll-contain ".concat(t),children:[(0,s.jsx)("h1",{className:"font-serif",children:"Feeds"}),(0,s.jsxs)("h2",{className:"cursor-pointer",children:[(0,s.jsx)("a",{className:"font-serif no-underline hover:underline mr-2",onClick:()=>l&&l("all"),children:"All sites"}),null!==i&&(0,s.jsxs)("small",{className:"text-sm font-light",children:["(",i,")"]})]}),n.map(e=>(0,s.jsxs)(r.Fragment,{children:[(0,s.jsxs)("h2",{className:"cursor-pointer",children:[(0,s.jsx)("a",{className:"font-serif no-underline hover:underline mr-2",onClick:()=>o(e.title),children:e.title}),(0,s.jsxs)("small",{className:"text-sm font-light",children:["(",e.totalEntries,")"]})]}),e.title===c&&(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{className:"cursor-pointer",children:(0,s.jsx)("a",{className:"font-serif no-underline hover:underline",onClick:()=>a&&a(c),children:"All sites"})}),e.sites.map(e=>(0,s.jsxs)("li",{className:"cursor-pointer",children:[(0,s.jsx)("a",{className:"font-serif no-underline hover:underline mr-2",onClick:()=>l&&l(e.key),children:e.title}),(0,s.jsxs)("small",{className:"text-sm font-light",children:["(",e.totalEntries,")"]})]},e.key))]})]},e.title)),(0,s.jsx)("div",{className:"pb-8"})]})};t.Z=i},6287:function(e,t,n){var s=n(5893),r=n(2125),i=n(5935),a=n(7294);let l=e=>{let{className:t,content:n,selectBack:l}=e,c=null;return(0,a.useEffect)(()=>{c&&c.scrollTo(0,0)},[n]),(0,s.jsxs)("article",{ref:e=>{c=e},className:"pb-4 max-w-full break-words flex-grow p-6 xl:overflow-auto overscroll-contain ".concat(t),children:[(0,s.jsx)("a",{className:"cursor-pointer xl:hidden",onClick:l,children:"← Back"}),n&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{children:(0,s.jsx)("a",{className:"font-serif font-bold no-underline hover:underline",href:n.url,target:"_blank",children:n.title})}),(0,s.jsxs)("div",{className:"xl:hidden",children:[(0,s.jsx)("strong",{children:n.siteTitle}),(0,s.jsxs)("span",{children:[", ",(0,r.Z)(1e3*n.timestamp,new Date)]})]}),(0,s.jsx)("div",{children:(0,i.ZP)(n.content,{replace:e=>{let t=e;return t.attribs&&"a"===t.name?(t.attribs.target="_blank",t):e}})})]}),(0,s.jsx)("div",{className:"pb-8"})]})};t.Z=l},4024:function(e,t,n){var s=n(5893),r=n(2125),i=n(7294),a=n(288);let l=e=>{let{index:t,entry:n,selectedEntryHash:i,selectEntry:a,selectSite:l,entryRef:c}=e;return(0,s.jsxs)("div",{id:"entry-".concat(n.key),ref:c,className:"rounded px-4 ".concat(i===n.key&&"bg-gray-200"||"").trim(),children:[(0,s.jsx)("h3",{children:(0,s.jsxs)("a",{className:"font-serif no-underline hover:underline cursor-pointer",onClick:()=>a&&a(n.key),children:[t+1,". ",n.title]})}),(0,s.jsxs)("small",{children:[(0,s.jsx)("a",{className:"cursor-pointer",onClick:()=>l&&l(n.site.key),children:n.site.title}),n.timestamp&&(0,s.jsxs)("span",{children:[", ",(0,r.Z)(1e3*n.timestamp,new Date)]})]})]})},c=e=>{let{className:t,basePath:n,locationState:r,selectEntry:c,selectSite:o,selectBack:u}=e,[h,d]=(0,i.useState)("loading"),[f,y]=(0,i.useState)(""),[m,g]=(0,i.useState)([]),[w,x]=(0,i.useState)(0),[p,j]=(0,i.useState)(""),[k,E]=(0,i.useState)(0),v=(0,i.useRef)(),b=null,N=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=(0,a.c)(e);switch(t.type){case"category":{let e=t.category,[r,i]=await Promise.all([s.getCategoryEntries(e,n),s.countCategoryEntries(e)]);return{entries:r,totalEntry:i}}case"site":{let{siteKey:e}=t,[r,i]="all"===e?await Promise.all([s.getAllEntries(n),s.countAllEntries()]):await Promise.all([s.getSiteEntries(e,n),s.countSiteEntries(e)]);return{entries:r,totalEntry:i}}case"entry":let{parent:r}=t,{key:i}=r;if("category"===r.type){let[e,t]=await Promise.all([s.getCategoryEntries(i,n),s.countCategoryEntries(i)]);return{entries:e,totalEntry:t}}let[l,c]="all"===i?await Promise.all([s.getAllEntries(n),s.countAllEntries()]):await Promise.all([s.getSiteEntries(i,n),s.countSiteEntries(i)]);return{entries:l,totalEntry:c}}},C=async e=>{if("loading"===h||m.length===w)return;let{entries:t}=await N(n,r,e);g(m.concat(t))},S=(e,t)=>{if(j(e),t){let t=globalThis.document.querySelector("#entry-".concat(e));null==t||t.scrollIntoView({block:"center",inline:"start"})}c&&c(P,A,e)};(0,i.useEffect)(()=>{switch(r.type){case"category":if(f===r.category)return;return y(r.category);case"site":if(f===r.siteKey)return;return y(r.siteKey)}},[r]),(0,i.useEffect)(()=>{b&&(async e=>{let{entries:t,totalEntry:s}=await N(n,r);d("loaded"),g(t),x(s),E(0),e.scrollTo(0,0)})(b)},[f]),(0,i.useEffect)(()=>{if(!(null==v?void 0:v.current))return;let e=new IntersectionObserver(e=>{let[t]=e;"loading"!==h&&t.isIntersecting&&(d("loading"),C(k+1).then(()=>{E(e=>e+1),d("loaded")}))});return e.observe(v.current),()=>{e.disconnect()}},[v,w,m]),(0,i.useEffect)(()=>{let e=e=>{switch(e.code){case"ArrowUp":case"KeyW":{if(!p){S(m[0].key);return}let e=m.findIndex(e=>e.key===p);if(e<=0)return;S(m[e-1].key,!0);return}case"ArrowDown":case"KeyS":{if(!p){S(m[0].key);return}let e=m.findIndex(e=>e.key===p);if(e>=m.length-1)return;S(m[e+1].key,!0);return}}};return globalThis.document.addEventListener("keyup",e),()=>{globalThis.document.removeEventListener("keyup",e)}});let P="entry"===r.type?r.parent.type:r.type,A="entry"===r.type?r.parent.key:"category"===r.type?r.category:r.siteKey;return(0,s.jsxs)("section",{ref:e=>{b=e},className:"pb-4 w-full sm:w-2/3 xl:w-2/6 flex-shrink-0 p-6 overflow-auto overscroll-contain ".concat(t),children:[(0,s.jsx)("a",{className:"cursor-pointer sm:hidden",onClick:u,children:"← Back"}),m.map((e,t)=>(0,s.jsx)(l,{index:t,entry:e,selectedEntryHash:p,selectEntry:S,selectSite:o,entryRef:m.length-5===t&&m.length<w?v:null},e.key)),0===m.length&&(0,s.jsx)("div",{children:(0,s.jsx)("h3",{children:"No contents"})},"none"),(0,s.jsx)("div",{className:"pb-8"})]})};t.Z=c},2002:function(e,t,n){var s=n(5893);n(7294);var r=n(9008),i=n.n(r);let a=()=>(0,s.jsxs)(i(),{children:[(0,s.jsx)("title",{children:"Feeds"}),(0,s.jsx)("meta",{charSet:"utf-8"}),(0,s.jsx)("meta",{httpEquiv:"X-UA-Compatible",content:"IE=Edge"}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,s.jsx)("meta",{name:"description",content:"Feeds Aggregator"})]});t.Z=a},288:function(e,t,n){n.d(t,{c:function(){return i}});class s{async getCategories(){let e=await fetch("".concat(this.basePath,"/categories.json"));if(200!==e.status)throw Error("Fail to load categories");let t=await e.json();return t.map(e=>({title:e.name,totalEntries:e.totalEntries,sites:e.sites.map(e=>({key:e.siteHash,title:e.title,totalEntries:e.totalEntries}))}))}async getCategoryEntries(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let t=await fetch("".concat(this.basePath,"/categories/").concat(e,".json"));if(200!==t.status)throw Error("Fail to load category entries");let n=await t.json();return n.map(e=>({key:e.entryHash,title:e.title,site:{key:e.siteHash,title:e.siteTitle},timestamp:Math.floor(e.date/1e3)}))}async getSiteEntries(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let t=await fetch("".concat(this.basePath,"/sites/").concat(e,".json"));if(200!==t.status)throw Error("Fail to load site entries");let n=await t.json(),s=n.entries;return s.map(e=>({key:e.entryHash,title:e.title,site:{key:e.siteHash,title:e.siteTitle},timestamp:Math.floor(e.date/1e3)}))}async countAllEntries(){let e=await fetch("".concat(this.basePath,"/categories.json"));if(200!==e.status)throw Error("Fail to load count all entries");let t=await e.json();return t.reduce((e,t)=>e+t.totalEntries,0)}async countSiteEntries(e){let t=await fetch("".concat(this.basePath,"/sites/").concat(e,".json"));if(200!==t.status)throw Error("Fail to load site entries");let n=await t.json(),s=n.entries;return s.length}async countCategoryEntries(e){let t=await fetch("".concat(this.basePath,"/categories/").concat(e,".json"));if(200!==t.status)throw Error("Fail to load category entries");let n=await t.json();return n.length}async getAllEntries(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];let e=await fetch("".concat(this.basePath,"/all.json"));if(200!==e.status)throw Error("Fail to load all entries");let t=await e.json();return t.map(e=>({key:e.entryHash,title:e.title,site:{key:e.siteHash,title:e.siteTitle},timestamp:Math.floor(e.date/1e3)}))}async getContent(e){let t=await fetch("".concat(this.basePath,"/entries/").concat(e,".json"));if(200!==t.status)throw Error("Fail to load content");let n=await t.json();return{title:n.title,content:n.content,url:n.link,siteKey:n.siteHash,siteTitle:n.siteTitle,timestamp:Math.floor(n.date/1e3)}}constructor(e){this.basePath="".concat(e,"/data")}}n(2891);let r=null,i=e=>(r||(r=new s(e)),r)},8728:function(e,t,n){n.d(t,{BJ:function(){return a},Dq:function(){return r},EH:function(){return i},GJ:function(){return c},hX:function(){return l}}),n(7294);var s=n(288);let r=e=>"article"===e?"block":"hidden xl:block",i=e=>{switch(e){case"article":return"hidden xl:block";case"entries":return"block";default:return"hidden sm:block"}},a=e=>{switch(e){case"article":return"hidden xl:block";case"entries":return"hidden sm:block";default:return"block"}},l=e=>{let t=e.split("/");if(t.shift(),![2,4].includes(t.length))return null;if(2===t.length){if(!t[1].trim())return null;switch(t[0]){case"categories":return{type:"category",category:t[1]};case"sites":return{type:"site",siteKey:t[1]};default:return null}}return t[3].trim()&&["categories","sites"].includes(t[0])&&"entries"===t[2]?{type:"entry",entryKey:t[3],parent:{type:"categories"===t[0]?"category":"site",key:t[1]}}:null},c=async(e,t,n,r)=>{if(!e)return null;let i=(0,s.c)(t);switch(e.type){case"category":case"site":n(null),r("entries");return;case"entry":{let{entryKey:t}=e,s=await i.getContent(t);if(!s)return;n(s),r("article");return}}}}}]);