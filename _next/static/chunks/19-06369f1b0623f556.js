"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[19],{8217:function(e,t,n){var r=n(5893),s=n(7294);t.Z=function(e){var t=e.className,n=e.categories,i=e.totalEntries,a=e.selectCategory,c=e.selectSite,u=(0,s.useState)(),o=u[0],l=u[1];return(0,r.jsxs)("aside",{className:"w-full sm:w-1/3 xl:w-1/5 flex-shrink-0 p-6 sm:overflow-auto ".concat(t),children:[(0,r.jsx)("h1",{className:"font-serif",children:"Feeds"}),(0,r.jsxs)("h2",{className:"cursor-pointer",children:[(0,r.jsx)("a",{className:"font-serif no-underline hover:underline mr-2",onClick:function(){return c&&c("all")},children:"All sites"}),null!==i&&(0,r.jsxs)("small",{className:"text-sm font-light",children:["(",i,")"]})]}),n.map((function(e){return(0,r.jsxs)(s.Fragment,{children:[(0,r.jsxs)("h2",{className:"cursor-pointer",children:[(0,r.jsx)("a",{className:"font-serif no-underline hover:underline mr-2",onClick:function(){return l(e.title)},children:e.title}),(0,r.jsxs)("small",{className:"text-sm font-light",children:["(",e.totalEntries,")"]})]}),e.title===o&&(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{className:"cursor-pointer",children:(0,r.jsx)("a",{className:"font-serif no-underline hover:underline",onClick:function(){return a&&a(o)},children:"All sites"})}),e.sites.map((function(e){return(0,r.jsxs)("li",{className:"cursor-pointer",children:[(0,r.jsx)("a",{className:"font-serif no-underline hover:underline mr-2",onClick:function(){return c&&c(e.key)},children:e.title}),(0,r.jsxs)("small",{className:"text-sm font-light",children:["(",e.totalEntries,")"]})]},e.key)}))]})]},e.title)})),(0,r.jsx)("div",{className:"pb-8"})]})}},5371:function(e,t,n){var r=n(5893),s=n(2125),i=n(7294);t.Z=function(e){var t=e.className,n=e.content,a=e.selectBack,c=null;return(0,i.useEffect)((function(){c&&c.scrollTo(0,0)}),[n]),(0,r.jsxs)("article",{ref:function(e){c=e},className:"pb-4 max-w-full break-words flex-grow p-6 xl:overflow-auto ".concat(t),children:[(0,r.jsx)("a",{className:"cursor-pointer xl:hidden",onClick:a,children:"\u2190 Back"}),n&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:(0,r.jsx)("a",{className:"font-serif font-bold no-underline hover:underline",href:n.url,target:"_blank",children:n.title})}),(0,r.jsxs)("div",{className:"xl:hidden",children:[(0,r.jsx)("strong",{children:n.siteTitle}),(0,r.jsxs)("span",{children:[", ",(0,s.Z)(1e3*n.timestamp,new Date)]})]}),(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:n.content}})]}),(0,r.jsx)("div",{className:"pb-8"})]})}},850:function(e,t,n){var r=n(7568),s=n(603),i=n(4051),a=n.n(i),c=n(5893),u=n(7294),o=n(2125),l=n(8688),f=function(e){var t=e.index,n=e.entry,r=e.selectedEntryHash,s=e.selectEntry,i=e.selectSite;return(0,c.jsxs)("div",{className:"rounded px-4 ".concat(r===n.key?"bg-gray-200":"").trim(),children:[(0,c.jsx)("h3",{children:(0,c.jsxs)("a",{className:"font-serif no-underline hover:underline cursor-pointer",onClick:function(){return s&&s(n.key)},children:[t+1,". ",n.title]})}),(0,c.jsxs)("small",{children:[(0,c.jsx)("a",{className:"cursor-pointer",onClick:function(){return i&&i(n.site.key)},children:n.site.title}),n.timestamp&&(0,c.jsxs)("span",{children:[", ",(0,o.Z)(1e3*n.timestamp,new Date)]})]})]})};t.Z=function(e){var t=e.className,n=e.basePath,i=e.locationState,o=e.selectEntry,p=e.selectSite,y=e.selectBack,d=(0,u.useState)("loading"),h=d[0],m=d[1],x=(0,u.useState)([]),k=x[0],b=x[1],v=(0,u.useState)(0),g=v[0],w=v[1],j=(0,u.useState)(""),E=j[0],C=j[1],N=(0,u.useState)(0),T=N[0],Z=N[1],K=(0,u.useState)(0),S=K[0],q=K[1],A=null,P=function(){var e=(0,r.Z)(a().mark((function e(t,n){var r,i,c,u,o,f,p,y,d,h,m,x,k,b,v,g,w,j,E=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=E.length>2&&void 0!==E[2]?E[2]:0,e.next=3,(0,l.Sl)((0,l.c0)(t),t);case 3:i=e.sent,e.t0=n.type,e.next="category"===e.t0?7:"site"===e.t0?16:"entry"===e.t0?32:58;break;case 7:return c=n.category,e.t1=s.Z,e.next=11,Promise.all([(0,l.cA)(i,c,r),(0,l.pW)(i,c)]);case 11:return e.t2=e.sent,u=(0,e.t1)(e.t2,2),o=u[0],f=u[1],e.abrupt("return",{entries:o,totalEntry:f});case 16:if(p=n.siteKey,e.t3=s.Z,"all"!==p){e.next=24;break}return e.next=21,Promise.all([(0,l.C0)(i,r),(0,l.M8)(i)]);case 21:e.t4=e.sent,e.next=27;break;case 24:return e.next=26,Promise.all([(0,l.V3)(i,p,r),(0,l.J4)(i,p)]);case 26:e.t4=e.sent;case 27:return e.t5=e.t4,y=(0,e.t3)(e.t5,2),d=y[0],h=y[1],e.abrupt("return",{entries:d,totalEntry:h});case 32:if(m=n.parent,x=m.key,"category"!==m.type){e.next=43;break}return e.t6=s.Z,e.next=38,Promise.all([(0,l.cA)(i,x,r),(0,l.pW)(i,x)]);case 38:return e.t7=e.sent,k=(0,e.t6)(e.t7,2),b=k[0],v=k[1],e.abrupt("return",{entries:b,totalEntry:v});case 43:if(e.t8=s.Z,"all"!==x){e.next=50;break}return e.next=47,Promise.all([(0,l.C0)(i,r),(0,l.M8)(i)]);case 47:e.t9=e.sent,e.next=53;break;case 50:return e.next=52,Promise.all([(0,l.V3)(i,x,r),(0,l.J4)(i,x)]);case 52:e.t9=e.sent;case 53:return e.t10=e.t9,g=(0,e.t8)(e.t10,2),w=g[0],j=g[1],e.abrupt("return",{entries:w,totalEntry:j});case 58:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){A&&i&&("entry"===i.type&&k.length>0||function(){var e=(0,r.Z)(a().mark((function e(t){var r,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(n,i);case 2:r=e.sent,s=r.entries,c=r.totalEntry,m("loaded"),b(s),w(c),Z(0),t.scrollTo(0,0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(A))}),[i]);var _=function(){var e=(0,r.Z)(a().mark((function e(t){var r,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("loading"!==h){e.next=2;break}return e.abrupt("return");case 2:if(k.length!==g){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,P(n,i,t);case 6:r=e.sent,s=r.entries,b(k.concat(s));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H="entry"===i.type?i.parent.type:i.type,M="entry"===i.type?i.parent.key:"category"===i.type?i.category:i.siteKey;return(0,c.jsxs)("section",{ref:function(e){A=e},onScroll:function(e){var t=e.currentTarget,n=Math.floor(.8*t.scrollHeight);t.scrollTop+t.clientHeight<n||"loading"!==h&&(e.timeStamp-S<2e3||(q(e.timeStamp),window.requestAnimationFrame((0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m("loading"),e.next=3,_(T+1);case 3:Z(T+1),m("loaded");case 5:case"end":return e.stop()}}),e)}))))))},className:"pb-4 w-full sm:w-2/3 xl:w-2/6 flex-shrink-0 p-6 overflow-auto ".concat(t),children:[(0,c.jsx)("a",{className:"cursor-pointer sm:hidden",onClick:y,children:"\u2190 Back"}),k.map((function(e,t){return(0,c.jsx)(f,{index:t,entry:e,selectedEntryHash:E,selectEntry:function(){var e=(0,r.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C(t),o){e.next=3;break}return e.abrupt("return");case 3:o(H,M,t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),selectSite:p},e.key)})),0===k.length&&(0,c.jsx)("div",{children:(0,c.jsx)("h3",{children:"No contents"})},"none"),(0,c.jsx)("div",{className:"pb-8"})]})}},5090:function(e,t,n){var r=n(5893),s=(n(7294),n(9008)),i=n.n(s);t.Z=function(){return(0,r.jsxs)(i(),{children:[(0,r.jsx)("title",{children:"Feeds"}),(0,r.jsx)("meta",{charSet:"utf-8"}),(0,r.jsx)("meta",{httpEquiv:"X-UA-Compatible",content:"IE=Edge"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,r.jsx)("meta",{name:"description",content:"Feeds Aggregator"})]})}},8688:function(e,t,n){n.d(t,{C0:function(){return E},CP:function(){return p},J4:function(){return v},L5:function(){return N},M8:function(){return k},Sl:function(){return o},V3:function(){return m},c0:function(){return f},cA:function(){return d},pW:function(){return w}});var r=n(7568),s=n(4051),i=n.n(s),a=n(2891),c=30,u=null;function o(e,t){return l.apply(this,arguments)}function l(){return(l=(0,r.Z)(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=4;break}return e.next=3,(0,a.createDbWorker)([t],"".concat(n,"/sqlite.worker.js"),"".concat(n,"/sql-wasm.wasm"));case 3:u=e.sent;case 4:return e.abrupt("return",u);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return{from:"inline",config:{serverMode:"full",requestChunkSize:4096,url:"".concat(e,"/data.sqlite3")}}}function p(e){return y.apply(this,arguments)}function y(){return y=(0,r.Z)(i().mark((function e(t){var n,r,s,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.query("select category, siteKey, siteTitle from SiteCategories");case 2:return n=e.sent,e.next=5,t.db.query("select category, count(*) as totalEntries from EntryCategories group by category");case 5:return r=e.sent.reduce((function(e,t){return e[t.category]=t.totalEntries,e}),{}),e.next=8,t.db.query("select siteKey, count(*) as totalEntries from EntryCategories group by siteKey;");case 8:return s=e.sent.reduce((function(e,t){return e[t.siteKey]=t.totalEntries,e}),{}),a=n.reduce((function(e,t){return e[t.category]||(e[t.category]={totalEntries:r[t.category],sites:[]}),e[t.category].sites.push({key:t.siteKey,title:t.siteTitle,totalEntries:s[t.siteKey]}),e}),{}),e.abrupt("return",Object.keys(a).map((function(e){return{title:e,sites:a[e].sites,totalEntries:a[e].totalEntries}})));case 11:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function d(e,t){return h.apply(this,arguments)}function h(){return h=(0,r.Z)(i().mark((function e(t,n){var r,s,a,u=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:0,s=r*c,e.next=4,t.db.query("select * from EntryCategories where category = ? and entryContentTime is not null order by entryContentTime desc limit ? offset ?",[n,c,s]);case 4:return a=e.sent,e.abrupt("return",a.map((function(e){return{key:e.entryKey,title:e.entryTitle,site:{key:e.siteKey,title:e.siteTitle},timestamp:e.entryContentTime}})));case 6:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function m(e,t){return x.apply(this,arguments)}function x(){return x=(0,r.Z)(i().mark((function e(t,n){var r,s,a,u=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:0,s=r*c,e.next=4,t.db.query("select entryKey, siteKey, siteTitle, entryTitle, entryContentTime from EntryCategories where siteKey = ? order by entryContentTime desc limit ? offset ?",[n,c,s]);case 4:return a=e.sent,e.abrupt("return",a.map((function(e){return{key:e.entryKey,title:e.entryTitle,site:{key:e.siteKey,title:e.siteTitle},timestamp:e.entryContentTime}})));case 6:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}function k(e){return b.apply(this,arguments)}function b(){return b=(0,r.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.query("select count(*) as total from EntryCategories");case 2:return n=e.sent,e.abrupt("return",n[0].total);case 4:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function v(e,t){return g.apply(this,arguments)}function g(){return g=(0,r.Z)(i().mark((function e(t,n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.query("select count(*) as total from EntryCategories where siteKey = ?",[n]);case 2:return r=e.sent,e.abrupt("return",r[0].total);case 4:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function w(e,t){return j.apply(this,arguments)}function j(){return j=(0,r.Z)(i().mark((function e(t,n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.query("select count(*) as total from EntryCategories where category = ?",[n]);case 2:return r=e.sent,e.abrupt("return",r[0].total);case 4:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function E(e){return C.apply(this,arguments)}function C(){return C=(0,r.Z)(i().mark((function e(t){var n,r,s,a=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:0,r=n*c,e.next=4,t.db.query("select entryKey, siteKey, siteTitle, entryTitle, entryContentTime from EntryCategories where entryContentTime is not null order by entryContentTime desc limit ? offset ?",[c,r]);case 4:return s=e.sent,e.abrupt("return",s.map((function(e){return{key:e.entryKey,title:e.entryTitle,site:{key:e.siteKey,title:e.siteTitle},timestamp:e.entryContentTime}})));case 6:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function N(e,t){return T.apply(this,arguments)}function T(){return T=(0,r.Z)(i().mark((function e(t,n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.query("select title, content, url, siteKey, siteTitle, contentTime as timestamp from Entries where key = ?",[n]);case 2:if(0!==(r=e.sent).length){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",r[0]);case 6:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}},2461:function(e,t,n){n.d(t,{BJ:function(){return o},Dq:function(){return c},EH:function(){return u},GJ:function(){return f},hX:function(){return l}});var r=n(7568),s=n(4051),i=n.n(s),a=(n(7294),n(8688)),c=function(e){return"article"===e?"block":"hidden xl:block"},u=function(e){switch(e){case"article":return"hidden xl:block";case"entries":return"block";default:return"hidden sm:block"}},o=function(e){switch(e){case"article":return"hidden xl:block";case"entries":return"hidden sm:block";default:return"block"}},l=function(e){var t=e.split("/");if(t.shift(),![2,4].includes(t.length))return null;if(2===t.length){if(!t[1].trim())return null;switch(t[0]){case"categories":return{type:"category",category:t[1]};case"sites":return{type:"site",siteKey:t[1]};default:return null}}return t[3].trim()&&["categories","sites"].includes(t[0])?"entries"!==t[2]?null:{type:"entry",entryKey:t[3],parent:{type:"categories"===t[0]?"category":"site",key:t[1]}}:null},f=function(){var e=(0,r.Z)(i().mark((function e(t,n,r,s){var c,u,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,(0,a.Sl)((0,a.c0)(n),n);case 4:c=e.sent,e.t0=t.type,e.next="category"===e.t0?8:"site"===e.t0?11:"entry"===e.t0?14:23;break;case 8:case 11:return r(null),s("entries"),e.abrupt("return");case 14:return u=t.entryKey,e.next=17,(0,a.L5)(c,u);case 17:if(o=e.sent){e.next=20;break}return e.abrupt("return");case 20:return r(o),s("article"),e.abrupt("return");case 23:case"end":return e.stop()}}),e)})));return function(t,n,r,s){return e.apply(this,arguments)}}()}}]);