"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[19],{8217:function(e,t,n){var r=n(5893),s=n(7294);t.Z=function(e){var t=e.className,n=e.categories,i=e.totalEntries,a=e.selectCategory,c=e.selectSite,u=(0,s.useState)(),o=u[0],l=u[1];return(0,r.jsxs)("aside",{className:"w-full sm:w-1/3 xl:w-1/5 flex-shrink-0 p-6 sm:overflow-auto ".concat(t),children:[(0,r.jsx)("h1",{className:"font-serif",children:"Feeds"}),(0,r.jsxs)("h2",{className:"cursor-pointer",children:[(0,r.jsx)("a",{className:"font-serif no-underline hover:underline mr-2",onClick:function(){return c&&c("all")},children:"All sites"}),null!==i&&(0,r.jsxs)("small",{className:"text-sm font-light",children:["(",i,")"]})]}),n.map((function(e){return(0,r.jsxs)(s.Fragment,{children:[(0,r.jsxs)("h2",{className:"cursor-pointer",children:[(0,r.jsx)("a",{className:"font-serif no-underline hover:underline mr-2",onClick:function(){return l(e.title)},children:e.title}),(0,r.jsxs)("small",{className:"text-sm font-light",children:["(",e.totalEntries,")"]})]}),e.title===o&&(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{className:"cursor-pointer",children:(0,r.jsx)("a",{className:"font-serif no-underline hover:underline",onClick:function(){return a&&a(o)},children:"All sites"})}),e.sites.map((function(e){return(0,r.jsxs)("li",{className:"cursor-pointer",children:[(0,r.jsx)("a",{className:"font-serif no-underline hover:underline mr-2",onClick:function(){return c&&c(e.key)},children:e.title}),(0,r.jsxs)("small",{className:"text-sm font-light",children:["(",e.totalEntries,")"]})]},e.key)}))]})]},e.title)})),(0,r.jsx)("div",{className:"pb-8"})]})}},5371:function(e,t,n){var r=n(5893),s=n(1574),i=n(7294);t.Z=function(e){var t=e.className,n=e.content,a=e.selectBack,c=null;return(0,i.useEffect)((function(){c&&c.scrollTo(0,0)}),[n]),(0,r.jsxs)("article",{ref:function(e){c=e},className:"pb-4 max-w-full break-words flex-grow p-6 xl:overflow-auto ".concat(t),children:[(0,r.jsx)("a",{className:"cursor-pointer xl:hidden",onClick:a,children:"\u2190 Back"}),n&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:(0,r.jsx)("a",{className:"font-serif font-bold no-underline hover:underline",href:n.url,target:"_blank",children:n.title})}),(0,r.jsxs)("div",{className:"xl:hidden",children:[(0,r.jsx)("strong",{children:n.siteTitle}),(0,r.jsxs)("span",{children:[", ",(0,s.Z)(1e3*n.timestamp,new Date)]})]}),(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:n.content}})]}),(0,r.jsx)("div",{className:"pb-8"})]})}},850:function(e,t,n){var r=n(8520),s=n.n(r),i=n(5893),a=n(7294),c=n(1574),u=n(8688);function o(e,t,n,r,s,i,a){try{var c=e[i](a),u=c.value}catch(o){return void n(o)}c.done?t(u):Promise.resolve(u).then(r,s)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var i=e.apply(t,n);function a(e){o(i,r,s,a,c,"next",e)}function c(e){o(i,r,s,a,c,"throw",e)}a(void 0)}))}}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,s=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){s=!0,i=u}finally{try{r||null==c.return||c.return()}finally{if(s)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var p=function(e){var t=e.entry,n=e.selectedEntryHash,r=e.selectEntry,s=e.selectSite;return(0,i.jsxs)("div",{className:"rounded px-4 ".concat(n===t.key?"bg-gray-200":"").trim(),children:[(0,i.jsx)("h3",{children:(0,i.jsx)("a",{className:"font-serif no-underline hover:underline cursor-pointer",onClick:function(){return r&&r(t.key)},children:t.title})}),(0,i.jsxs)("small",{children:[(0,i.jsx)("a",{className:"cursor-pointer",onClick:function(){return s&&s(t.site.key)},children:t.site.title}),t.timestamp&&(0,i.jsxs)("span",{children:[", ",(0,c.Z)(1e3*t.timestamp,new Date)]})]})]})};t.Z=function(e){var t=e.className,n=e.basePath,r=e.locationState,c=e.selectEntry,o=e.selectSite,d=e.selectBack,h=(0,a.useState)("loading"),y=h[0],m=h[1],x=(0,a.useState)([]),v=x[0],k=x[1],b=(0,a.useState)(0),w=b[0],g=b[1],j=(0,a.useState)(""),E=j[0],C=j[1],N=(0,a.useState)(0),T=N[0],K=N[1],S=null,q=l(s().mark((function e(t,n,r){var i,a,c,o,l,p,d,h,y,m,x,v,k,b,w;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=void 0===r?0:r,e.next=3,(0,u.Sl)((0,u.c0)(t),t);case 3:a=e.sent,e.t0=n.type,e.next="categories"===e.t0?7:"sites"===e.t0?16:"entries"===e.t0?32:44;break;case 7:return c=n.category,e.t1=f,e.next=11,Promise.all([(0,u.cA)(a,c,i),(0,u.pW)(a,c)]);case 11:return e.t2=e.sent,o=(0,e.t1)(e.t2,2),l=o[0],p=o[1],e.abrupt("return",{entries:l,totalEntry:p});case 16:if(d=n.siteHash,e.t3=f,"all"!==d){e.next=24;break}return e.next=21,Promise.all([(0,u.C0)(a,i),(0,u.M8)(a)]);case 21:e.t4=e.sent,e.next=27;break;case 24:return e.next=26,Promise.all([(0,u.V3)(a,d,i),(0,u.J4)(a,d)]);case 26:e.t4=e.sent;case 27:return e.t5=e.t4,h=(0,e.t3)(e.t5,2),y=h[0],m=h[1],e.abrupt("return",{entries:y,totalEntry:m});case 32:return x=n.entryHash,e.next=35,(0,u.L5)(a,x);case 35:return v=e.sent,e.t6=f,e.next=39,Promise.all([(0,u.V3)(a,v.siteKey,i),(0,u.J4)(a,v.siteKey)]);case 39:return e.t7=e.sent,k=(0,e.t6)(e.t7,2),b=k[0],w=k[1],e.abrupt("return",{entries:b,totalEntry:w});case 44:case"end":return e.stop()}}),e)})));(0,a.useEffect)((function(){S&&r&&("entries"===r.type&&v.length>0||l(s().mark((function e(t){var i,a,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(n,r);case 2:i=e.sent,a=i.entries,c=i.totalEntry,m("loaded"),k(a),g(c),K(0),t.scrollTo(0,0);case 10:case"end":return e.stop()}}),e)})))(S))}),[r]);var P=l(s().mark((function e(t){var i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("loading"!==y){e.next=2;break}return e.abrupt("return");case 2:if(v.length!==w){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,q(n,r,t);case 6:i=e.sent,a=i.entries,k(v.concat(a));case 9:case"end":return e.stop()}}),e)}))),H=l(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.currentTarget,r=Math.floor(.8*n.scrollHeight),!(n.scrollTop+n.clientHeight>r&&"loading"!==y)){e.next=8;break}return m("loading"),e.next=6,P(T+1);case 6:K(T+1),m("loaded");case 8:case"end":return e.stop()}}),e)})));return(0,i.jsxs)("section",{ref:function(e){S=e},onScroll:H,className:"pb-4 w-full sm:w-2/3 xl:w-2/6 flex-shrink-0 p-6 sm:overflow-auto ".concat(t),children:[(0,i.jsx)("a",{className:"cursor-pointer sm:hidden",onClick:d,children:"\u2190 Back"}),v.map((function(e,t){return(0,i.jsx)(p,{entry:e,selectedEntryHash:E,selectEntry:l(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C(t),c){e.next=3;break}return e.abrupt("return");case 3:c(t);case 4:case"end":return e.stop()}}),e)}))),selectSite:o},"entry-".concat(e.key))})),0===v.length&&(0,i.jsx)("div",{children:(0,i.jsx)("h3",{children:"No contents"})},"none"),(0,i.jsx)("div",{className:"pb-8"})]})}},5090:function(e,t,n){var r=n(5893),s=(n(7294),n(9008));t.Z=function(){return(0,r.jsxs)(s.default,{children:[(0,r.jsx)("title",{children:"Feeds"}),(0,r.jsx)("meta",{charSet:"utf-8"}),(0,r.jsx)("meta",{httpEquiv:"X-UA-Compatible",content:"IE=Edge"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,r.jsx)("meta",{name:"description",content:"Feeds Aggregator"})]})}},8688:function(e,t,n){n.d(t,{Sl:function(){return l},c0:function(){return p},CP:function(){return d},cA:function(){return y},V3:function(){return x},M8:function(){return k},J4:function(){return w},pW:function(){return j},C0:function(){return C},L5:function(){return T}});var r=n(8520),s=n.n(r),i=n(2891);function a(e,t,n,r,s,i,a){try{var c=e[i](a),u=c.value}catch(o){return void n(o)}c.done?t(u):Promise.resolve(u).then(r,s)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var i=e.apply(t,n);function c(e){a(i,r,s,c,u,"next",e)}function u(e){a(i,r,s,c,u,"throw",e)}c(void 0)}))}}var u=30,o=null;function l(e,t){return f.apply(this,arguments)}function f(){return(f=c(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=4;break}return e.next=3,(0,i.createDbWorker)([t],"".concat(n,"/sqlite.worker.js"),"".concat(n,"/sql-wasm.wasm"));case 3:o=e.sent;case 4:return e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return{from:"inline",config:{serverMode:"full",requestChunkSize:4096,url:"".concat(e,"/data.sqlite3")}}}function d(e){return h.apply(this,arguments)}function h(){return(h=c(s().mark((function e(t){var n,r,i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.query("select category, siteKey, siteTitle from SiteCategories");case 2:return n=e.sent,e.next=5,t.db.query("select category, count(*) as totalEntries from EntryCategories group by category");case 5:return r=e.sent.reduce((function(e,t){return e[t.category]=t.totalEntries,e}),{}),e.next=8,t.db.query("select siteKey, count(*) as totalEntries from EntryCategories group by siteKey;");case 8:return i=e.sent.reduce((function(e,t){return e[t.siteKey]=t.totalEntries,e}),{}),a=n.reduce((function(e,t){return e[t.category]||(e[t.category]={totalEntries:r[t.category],sites:[]}),e[t.category].sites.push({key:t.siteKey,title:t.siteTitle,totalEntries:i[t.siteKey]}),e}),{}),e.abrupt("return",Object.keys(a).map((function(e){return{title:e,sites:a[e].sites,totalEntries:a[e].totalEntries}})));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t){return m.apply(this,arguments)}function m(){return(m=c(s().mark((function e(t,n,r){var i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(void 0===r?0:r)*u,e.next=4,t.db.query("select * from EntryCategories where category = ? and entryContentTime is not null order by entryContentTime desc limit ? offset ?",[n,u,i]);case 4:return a=e.sent,e.abrupt("return",a.map((function(e){return{key:e.entryKey,title:e.entryTitle,site:{key:e.siteKey,title:e.siteTitle},timestamp:e.entryContentTime}})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t){return v.apply(this,arguments)}function v(){return(v=c(s().mark((function e(t,n,r){var i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(void 0===r?0:r)*u,e.next=4,t.db.query("select entryKey, siteKey, siteTitle, entryTitle, entryContentTime from EntryCategories where siteKey = ? order by entryContentTime desc limit ? offset ?",[n,u,i]);case 4:return a=e.sent,e.abrupt("return",a.map((function(e){return{key:e.entryKey,title:e.entryTitle,site:{key:e.siteKey,title:e.siteTitle},timestamp:e.entryContentTime}})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return b.apply(this,arguments)}function b(){return(b=c(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.query("select count(*) as total from EntryCategories");case 2:return n=e.sent,e.abrupt("return",n[0].total);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t){return g.apply(this,arguments)}function g(){return(g=c(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.query("select count(*) as total from EntryCategories where siteKey = ?",[n]);case 2:return r=e.sent,e.abrupt("return",r[0].total);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t){return E.apply(this,arguments)}function E(){return(E=c(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.query("select count(*) as total from EntryCategories where category = ?",[n]);case 2:return r=e.sent,e.abrupt("return",r[0].total);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return N.apply(this,arguments)}function N(){return(N=c(s().mark((function e(t,n){var r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(void 0===n?0:n)*u,e.next=4,t.db.query("select entryKey, siteKey, siteTitle, entryTitle, entryContentTime from EntryCategories where entryContentTime is not null order by entryContentTime desc limit ? offset ?",[u,r]);case 4:return i=e.sent,e.abrupt("return",i.map((function(e){return{key:e.entryKey,title:e.entryTitle,site:{key:e.siteKey,title:e.siteTitle},timestamp:e.entryContentTime}})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t){return K.apply(this,arguments)}function K(){return(K=c(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.query("select title, content, url, siteKey, siteTitle, contentTime as timestamp from Entries where key = ?",[n]);case 2:if(0!==(r=e.sent).length){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",r[0]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2461:function(e,t,n){n.d(t,{Dq:function(){return u},EH:function(){return o},BJ:function(){return l},hX:function(){return f},GJ:function(){return p}});var r=n(8520),s=n.n(r),i=(n(7294),n(8688));function a(e,t,n,r,s,i,a){try{var c=e[i](a),u=c.value}catch(o){return void n(o)}c.done?t(u):Promise.resolve(u).then(r,s)}var c,u=function(e){switch(e){case"article":return"block";default:return"hidden xl:block"}},o=function(e){switch(e){case"article":return"hidden xl:block";case"entries":return"block";default:return"hidden sm:block"}},l=function(e){switch(e){case"article":return"hidden xl:block";case"entries":return"hidden sm:block";default:return"block"}},f=function(e){var t=e.split("/");if(t.shift(),2!==t.length)return null;switch(t[0]){case"categories":return{type:t[0],category:t[1]};case"sites":return{type:t[0],siteHash:t[1]};case"entries":return{type:t[0],entryHash:t[1]};default:return null}},p=(c=s().mark((function e(t,n,r,a){var c,u,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,(0,i.Sl)((0,i.c0)(n),n);case 4:c=e.sent,e.t0=t.type,e.next="categories"===e.t0?8:"sites"===e.t0?11:"entries"===e.t0?14:23;break;case 8:case 11:return r(null),a("entries"),e.abrupt("return");case 14:return u=t.entryHash,e.next=17,(0,i.L5)(c,u);case 17:if(o=e.sent){e.next=20;break}return e.abrupt("return");case 20:return r(o),a("article"),e.abrupt("return");case 23:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var s=c.apply(e,t);function i(e){a(s,n,r,i,u,"next",e)}function u(e){a(s,n,r,i,u,"throw",e)}i(void 0)}))})}}]);